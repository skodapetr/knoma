{"version":3,"sources":["webpack://knoma/./client/about/about.vue?18a2","webpack://knoma/./client/about/about-instance.vue?4b44","webpack://knoma/./client/application/configuration.ts","webpack://knoma/./client/database/model.ts","webpack://knoma/./client/database/predefined.ts","webpack://knoma/./client/database/database-simple.ts","webpack://knoma/./client/database/database-http.ts","webpack://knoma/./client/database/database-local-storage.ts","webpack://knoma/./client/database/index.ts","webpack://knoma/client/about/about-instance.vue","webpack://knoma/./client/about/about-instance.vue?5978","webpack://knoma/./client/about/about-instance.vue","webpack://knoma/./client/about/about-keyboard.vue?7d84","webpack://knoma/./client/about/about-keyboard.vue","webpack://knoma/client/about/about-keyboard.vue","webpack://knoma/./client/about/about-predicates.vue?61cd","webpack://knoma/./client/about/about-predicates.vue","webpack://knoma/client/about/about-predicates.vue","webpack://knoma/./client/about/about-text.vue?f595","webpack://knoma/./client/about/about-text.vue","webpack://knoma/client/about/about-text.vue","webpack://knoma/./client/about/about-types.vue?e781","webpack://knoma/./client/about/about-types.vue","webpack://knoma/client/about/about-types.vue","webpack://knoma/./client/about/about.vue?c4b1","webpack://knoma/client/about/about.vue","webpack://knoma/./client/about/about.vue","webpack://knoma/./client/document-detail/document-detail.vue?875c","webpack://knoma/./client/document-detail/document-detail-header.vue?cde2","webpack://knoma/./client/document-detail/type-line.vue?d7a1","webpack://knoma/./client/components/tag-line.vue?0acf","webpack://knoma/client/components/tag-line.vue","webpack://knoma/./client/components/tag-line.vue?4da6","webpack://knoma/./client/components/tag-line.vue","webpack://knoma/./client/document-detail/type-line.vue?ef44","webpack://knoma/client/document-detail/type-line.vue","webpack://knoma/./client/document-detail/type-line.vue","webpack://knoma/./client/document-detail/document-properties-preview.vue?8b2b","webpack://knoma/client/document-detail/document-properties-preview.vue","webpack://knoma/./client/document-detail/document-properties-preview.vue?5e9a","webpack://knoma/./client/document-detail/document-properties-preview.vue?84e3","webpack://knoma/./client/document-detail/document-detail-header.vue?521f","webpack://knoma/client/document-detail/document-detail-header.vue","webpack://knoma/./client/document-detail/document-detail-header.vue","webpack://knoma/./client/document-detail/document-detail-notes.vue?0f54","webpack://knoma/./client/document-detail/note-edit.vue?a891","webpack://knoma/client/document-detail/note-edit.vue","webpack://knoma/./client/document-detail/note-edit.vue?81a2","webpack://knoma/./client/document-detail/note-edit-service.ts","webpack://knoma/./client/document-detail/note-edit.vue","webpack://knoma/./client/document-detail/document-detail-service.ts","webpack://knoma/./client/database/model-factory.ts","webpack://knoma/client/document-detail/document-detail-notes.vue","webpack://knoma/./client/document-detail/document-detail-notes.vue?215b","webpack://knoma/./client/document-detail/document-detail-notes.vue","webpack://knoma/./client/components/properties-dialog.vue?a624","webpack://knoma/./client/components/properties-dialog-item.vue?ac59","webpack://knoma/./client/components/date-picker.vue?b14d","webpack://knoma/client/components/date-picker.vue","webpack://knoma/./client/components/date-picker.vue?e477","webpack://knoma/./client/components/date-picker.vue","webpack://knoma/./client/components/properties-dialog-item.vue?cd06","webpack://knoma/client/components/properties-dialog-item.vue","webpack://knoma/./client/components/properties-dialog-item.vue","webpack://knoma/./client/components/property-selector.vue?b74f","webpack://knoma/./client/components/property-selector.vue?c60f","webpack://knoma/client/components/property-selector.vue","webpack://knoma/./client/components/property-selector.vue","webpack://knoma/./client/components/properties-dialog.vue?66ff","webpack://knoma/client/components/properties-dialog.vue","webpack://knoma/./client/components/properties-dialog.vue","webpack://knoma/./client/components/codelist-dialog.vue?2769","webpack://knoma/client/components/codelist-dialog.vue","webpack://knoma/./client/components/codelist-dialog.vue?b15f","webpack://knoma/./client/components/codelist-dialog.vue","webpack://knoma/client/document-detail/document-detail.vue","webpack://knoma/./client/document-detail/document-detail.vue?e9c9","webpack://knoma/./client/document-detail/document-detail.vue","webpack://knoma/./client/document-list/document-list.vue?2fb8","webpack://knoma/./client/document-list/document-list-item.vue?6065","webpack://knoma/client/document-list/document-list-item.vue","webpack://knoma/./client/document-list/document-list-item.vue?7cd8","webpack://knoma/./client/document-list/document-list-service.ts","webpack://knoma/./client/document-list/document-list-item.vue","webpack://knoma/./client/document-list/document-filter.vue?acf9","webpack://knoma/./client/document-list/type-filter.vue?f03f","webpack://knoma/client/document-list/type-filter.vue","webpack://knoma/./client/document-list/type-filter.vue?dea0","webpack://knoma/./client/document-list/type-filter.vue","webpack://knoma/./client/document-list/property-filter.vue?7f65","webpack://knoma/./client/document-list/property-filter.vue?85a2","webpack://knoma/client/document-list/property-filter.vue","webpack://knoma/./client/document-list/property-filter.vue","webpack://knoma/./client/document-list/document-filter.vue?c719","webpack://knoma/client/document-list/document-filter.vue","webpack://knoma/./client/document-list/document-filter.vue","webpack://knoma/./client/document-list/filtered-document-source.ts","webpack://knoma/client/document-list/document-list.vue","webpack://knoma/./client/document-list/document-list.vue?e929","webpack://knoma/./client/document-list/document-list.vue?7b65","webpack://knoma/./client/application/router.js","webpack://knoma/./client/application/layout.vue?73d6","webpack://knoma/./client/application/layout.vue","webpack://knoma/client/application/layout.vue","webpack://knoma/./client/index.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","grow","model","value","tab","callback","$$v","expression","_v","staticStyle","padding","_withStripped","DatabaseType","_s","database","configuration","getConfiguration","console","log","PredicateEditType","LABELS","CODE_LISTS","PREDICATES","Codelist","undefined","String","Date","getCoreCodelistItem","type","predicate","iri","label","copyPredicateLabelsToLabels","SimpleDatabase","documents","refreshDocuments","result","document","types","includes","push","documentToPredicate","predicates","getPredicates","Set","item","add","isIntersecting","properties","title","left","right","leftItem","codelist","listColour","listPriority","parseInt","HttpDatabase","documentsAreDirty","response","data","url","encodeURIComponent","LIST_IDENTIFIER","LocalStorageDatabase","localStorage","removeItem","index","findDocument","splice","saveDocuments","length","content","JSON","stringify","setItem","contentAsString","getItem","parse","newDocument","description","created","HTTP","LOCAL_STORAGE","now","toISOString","substr","storeDocument","addDemoContent","createLocalStorageDatabase","createDatabase","getDatabase","getDatabaseLabel","component","options","__file","_m","on","onOpenPropertiesDialog","onOpenNoteTypeDialog","save","onSave","close","onClose","items","$set","visible","propertyDialog","open","onSavePropertiesDialog","onClosePropertiesDialog","typeDialog","onSaveNoteTypeDialog","onCloseNoteTypeDialog","staticClass","click","icon","onCopyIri","$event","onEditProperties","onEditType","required","input","onChangeTitle","clearable","rows","onChangeDescription","small","directives","name","rawName","_l","tags","tag","key","onClick","computeTags","async","getLabel","$emit","predicateToValues","values","nextProperties","updateProperties","predicateIri","Object","entries","getPredicate","itemsToShow","sort","localeCompare","navigator","clipboard","writeText","owner","documentIri","v","onChange","onInsert","delete","onDelete","onAppend","color","width","onAdd","text","onChangeContent","paste","onPaste","keydown","onKeyDown","image","showImage","src","onToggleImage","onClearImage","identifier","event","altKey","target","selectionStart","selectionEnd","onKeyAltDown","positionStart","positionEnd","preventDefault","clipboardData","file","getAsFile","reader","FileReader","onload","imageInBase64","readAsDataURL","createNewNote","notes","nextIndex","map","note","Number","reduce","Math","max","padStart","getTextAreas","window","querySelectorAll","fullscreen","transition","indexOf","_k","keyCode","dark","entry","definition","multiple","onAddValue","_e","onDeleteValue","onUpdateValue","ref","scopedSlots","_u","fn","_g","_b","readonly","change","setTimeout","$refs","menu","loading","iris","getCodelist","disabled","filteredItems","autofocus","filterItems","domain","currentTypes","typeObject","newValue","persistent","chips","refreshOnShow","refresh","cloneProperties","source","Array","isArray","getTime","replace","c","r","random","toString","addEventListener","$route","query","getDocument","removeEventListener","ctrlKey","pop","focus","nodes","active","activeElement","focusPreviousNote","focusNextNote","$notify","ex","$router","reload","filters","visibleDocuments","onOpen","visibleLimit","onShowMore","fab","onCreate","size","indeterminate","stopPropagation","keys","priority","buildDocumentTagList","search","onSearchInput","onInput","onAddInclude","onAddExclude","include","onRemoveType","dialog","onSaveTypeDialog","onCloseTypeDialog","oldValue","onClear","visual","computeVisual","copyProperties","property","valuesToShow","freeze","DocumentFilters","FilteredDocumentSource","getDocuments","filter","doc","filterDocument","slice","filterBySearch","filterByType","filterByProperties","toLowerCase","filterTypes","documentTypes","filterValues","documentValues","filterValue","location","resolve","href","deleteDocument","showMore","VueRouter","DocumentDetail","DocumentList","About","app","to","rel","Vue","Vuetify","VueNotifications","router","createElement","Layout"],"mappings":"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","file":"main.5320cb4f05899f73.bundle.js","sourcesContent":["var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"v-container\",\n    [\n      _c(\n        \"v-tabs\",\n        {\n          attrs: { grow: \"\" },\n          model: {\n            value: _vm.tab,\n            callback: function($$v) {\n              _vm.tab = $$v\n            },\n            expression: \"tab\"\n          }\n        },\n        [\n          _c(\"v-tab\", [_vm._v(\"Instance\")]),\n          _vm._v(\" \"),\n          _c(\"v-tab\", [_vm._v(\"Keyboard\")]),\n          _vm._v(\" \"),\n          _c(\"v-tab\", [_vm._v(\"Types\")]),\n          _vm._v(\" \"),\n          _c(\"v-tab\", [_vm._v(\"Predicates\")]),\n          _vm._v(\" \"),\n          _c(\"v-tab\", [_vm._v(\"Text\")])\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"v-tabs-items\",\n        {\n          staticStyle: { padding: \"2rem\" },\n          model: {\n            value: _vm.tab,\n            callback: function($$v) {\n              _vm.tab = $$v\n            },\n            expression: \"tab\"\n          }\n        },\n        [\n          _c(\"v-tab-item\", [_c(\"app-instance\")], 1),\n          _vm._v(\" \"),\n          _c(\"v-tab-item\", [_c(\"app-keyboard\")], 1),\n          _vm._v(\" \"),\n          _c(\"v-tab-item\", [_c(\"app-types\")], 1),\n          _vm._v(\" \"),\n          _c(\"v-tab-item\", [_c(\"app-predicates\")], 1),\n          _vm._v(\" \"),\n          _c(\"v-tab-item\", [_c(\"app-text\")], 1)\n        ],\n        1\n      )\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"section\", [\n    _c(\"h2\", [_vm._v(\"Instance\")]),\n    _vm._v(\" \"),\n    _c(\"dl\", [\n      _c(\"dt\", [_vm._v(\"Database:\")]),\n      _vm._v(\" \"),\n      _c(\"dd\", [_vm._v(_vm._s(_vm.database))])\n    ])\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","export enum DatabaseType {\n  HTTP,\n  LOCAL_STORAGE,\n}\n\nexport type Configuration = {\n\n  domain: string;\n\n  database: DatabaseType;\n\n};\n\ndeclare let __DATABASE__: DatabaseType;\n\nconst configuration = {\n  \"domain\": \"http://localhost/\",\n  \"database\": __DATABASE__,\n};\n\nconsole.log(\"Configuration\", configuration);\n\nexport function getConfiguration(): Configuration {\n  return configuration;\n}\n","/**\n * Document represents unit of user interaction. Like a collection\n * of papers that one would employ to take notes on a particular topic.\n *\n * This is used mostly as a document reference.\n */\nexport interface Document {\n\n  iri: string;\n\n  types: string[];\n\n  title: string;\n\n  description: string;\n\n  created: string;\n\n  properties: { [iri: string]: string[] },\n\n}\n\n/**\n * Document may contain notes.\n */\nexport interface DocumentWithData extends Document {\n\n  items: Note[];\n\n}\n\n/**\n * A piece of information user add to a document. Represent a note,\n * one would put on a paper.\n */\nexport interface Note {\n\n  /**\n   * Relative identifier.\n   */\n  identifier: string;\n\n  properties: { [iri: string]: string[] },\n\n  created: string;\n\n  text: string;\n\n  image: string | undefined;\n\n}\n\n/**\n * Can be used to connect properties to documents and notes. Predicate\n * can be predefined or be a document with proper types.\n */\nexport interface Predicate {\n\n  iri: string;\n\n  label: string;\n\n  /**\n   * Allow multiple values.\n   */\n  multiple: boolean;\n\n  /**\n   * Edit component type.\n   */\n  type: PredicateEditType;\n\n  /**\n   * Codelist to use to get values from.\n   */\n  codelist: string[] | undefined;\n\n  /**\n   * May limit classes required to allow for predicate search.\n   * If undefined there are no limitations.\n   */\n  domain: string[] | undefined;\n\n  /**\n   * If set values are shown as tags in list with given color\n   * */\n  listColour: string | undefined;\n\n  /**\n   * Higher number mean higher position in the tag list.\n   * */\n  listPriority: number | undefined;\n\n}\n\n/**\n * Codelist of predicate edit types, those determine input type.\n */\nexport enum PredicateEditType {\n  String = \"string\",\n  Date = \"date\",\n  Codelist = \"codelist\",\n}\n","import {Predicate, PredicateEditType} from \"./model\";\n\nexport const NOTE = \"https://skodapetr.github.io/knoma/vocabulary#Note\";\n\nconst LABELS: { [iri: string]: string } = {\n  \"http://www.w3.org/2004/02/skos/core#ConceptScheme\": \"Concept Scheme\",\n  \"http://www.w3.org/2004/02/skos/core#Concept\": \"Concept\",\n  \"http://www.w3.org/2000/01/rdf-schema#Property\": \"Property\",\n  \"http://www.w3.org/2000/01/rdf-schema#Class\": \"Class\",\n};\n\nconst CODE_LISTS: { [type: string]: string[] } = {\n  \"http://www.w3.org/2000/01/rdf-schema#Class\": [\n    \"http://www.w3.org/2004/02/skos/core#ConceptScheme\",\n    \"http://www.w3.org/2004/02/skos/core#Concept\",\n    \"http://www.w3.org/2000/01/rdf-schema#Property\",\n    \"http://www.w3.org/2000/01/rdf-schema#Class\",\n  ],\n};\n\nconst PREDICATES: Predicate[] = [\n  {\n    \"iri\": \"http://www.w3.org/2004/02/skos/core#inScheme\",\n    \"label\": \"In scheme\",\n    \"multiple\": true,\n    \"type\": PredicateEditType.Codelist,\n    \"codelist\": [\n      \"http://www.w3.org/2004/02/skos/core#ConceptScheme\",\n    ],\n    \"domain\": [\n      \"http://www.w3.org/2004/02/skos/core#Concept\",\n    ],\n    \"listColour\" : undefined,\n    \"listPriority\": undefined,\n  }, {\n    \"iri\": \"https://skodapetr.github.io/knoma/vocabulary#url\",\n    \"label\": \"URL\",\n    \"multiple\": false,\n    \"type\": PredicateEditType.String,\n    \"codelist\": undefined,\n    \"domain\": undefined,\n    \"listColour\" : undefined,\n    \"listPriority\": undefined,\n  }, {\n    \"iri\": \"https://skodapetr.github.io/knoma/vocabulary#doi\",\n    \"label\": \"DOI\",\n    \"multiple\": false,\n    \"type\": PredicateEditType.String,\n    \"codelist\": undefined,\n    \"domain\": undefined,\n    \"listColour\" : undefined,\n    \"listPriority\": undefined,\n  }, {\n    \"iri\": \"https://skodapetr.github.io/knoma/vocabulary#author\",\n    \"label\": \"Author\",\n    \"multiple\": false,\n    \"type\": PredicateEditType.String,\n    \"codelist\": undefined,\n    \"domain\": undefined,\n    \"listColour\" : undefined,\n    \"listPriority\": undefined,\n  }, {\n    \"iri\": \"https://skodapetr.github.io/knoma/vocabulary#published\",\n    \"label\": \"Published\",\n    \"multiple\": false,\n    \"type\": PredicateEditType.Date,\n    \"codelist\": undefined,\n    \"domain\": undefined,\n    \"listColour\" : undefined,\n    \"listPriority\": undefined,\n  }, {\n    \"iri\": \"http://www.w3.org/2000/01/rdf-schema#domain\",\n    \"label\": \"Domain\",\n    \"multiple\": true,\n    \"type\": PredicateEditType.Codelist,\n    \"codelist\": [\n      \"http://www.w3.org/2004/02/skos/core#ConceptScheme\",\n    ],\n    \"domain\": [\n      \"http://www.w3.org/2000/01/rdf-schema#Property\",\n    ],\n    \"listColour\" : undefined,\n    \"listPriority\": undefined,\n  }, {\n    // Used by notes to reference another note or a document.\n    \"iri\": \"https://skodapetr.github.io/knoma/vocabulary#ref\",\n    \"label\": \"Reference\",\n    \"multiple\": false,\n    \"type\": PredicateEditType.String,\n    \"codelist\": undefined,\n    \"domain\": undefined,\n    \"listColour\" : undefined,\n    \"listPriority\": undefined,\n  }, {\n    // If document is a value in a codelist and this values is set,\n    // it determines the color the value is shown in the list.\n    \"iri\": \"https://skodapetr.github.io/knoma/vocabulary#listColor\",\n    \"label\": \"List color\",\n    \"multiple\": false,\n    \"type\": PredicateEditType.String,\n    \"codelist\": undefined,\n    \"domain\": undefined,\n    \"listColour\" : undefined,\n    \"listPriority\": undefined,\n  }, {\n    // In addition to listColor user can specify priority. If not set default\n    // is zero. This value is used to order tags in the document list.\n    \"iri\": \"https://skodapetr.github.io/knoma/vocabulary#listPriority\",\n    \"label\": \"List priority\",\n    \"multiple\": false,\n    \"type\": PredicateEditType.String,\n    \"codelist\": undefined,\n    \"domain\": undefined,\n    \"listColour\" : undefined,\n    \"listPriority\": undefined,\n  },\n];\n\n(function initialize() {\n  copyPredicateLabelsToLabels();\n})();\n\nfunction copyPredicateLabelsToLabels() {\n  for (const predicate of PREDICATES) {\n    LABELS[predicate.iri] = predicate.label;\n  }\n}\n\nexport function getCoreLabel(type: string): string | undefined {\n  return LABELS[type];\n}\n\nexport function getCoreCodelistItem(type: string): string[] {\n  return CODE_LISTS[type] || [];\n}\n\nexport function getCorePredicate(): Predicate[] {\n  return PREDICATES;\n}\n","import {Database} from \"./database-api\";\nimport {\n  Document,\n  DocumentWithData,\n  Predicate,\n  PredicateEditType,\n} from \"./model\";\nimport {\n  getCoreCodelistItem,\n  getCoreLabel,\n  getCorePredicate,\n} from \"./predefined\";\n\nconst RDFS_PROPERTY =\n  \"http://www.w3.org/2000/01/rdf-schema#Property\";\n\nconst RDFS_HAS_DOMAIN =\n  \"http://www.w3.org/2000/01/rdf-schema#domain\";\n\nconst RDFS_HAS_IN_SCHEME =\n  \"http://www.w3.org/2004/02/skos/core#inScheme\";\n\nconst LIST_COLOR =\n  \"https://skodapetr.github.io/knoma/vocabulary#listColor\";\n\nconst LIST_PRIORITY =\n  \"https://skodapetr.github.io/knoma/vocabulary#listPriority\";\n\n/**\n * Base class for a simple database. Use document list fetched from server.\n */\nexport abstract class SimpleDatabase implements Database {\n\n  protected documents: Document[] = [];\n\n  abstract getDatabaseLabel(): string;\n\n  async getDocuments(): Promise<Document[]> {\n    await this.refreshDocuments();\n    return this.documents;\n  }\n\n  /**\n   * Update documents from server if needed.\n   */\n  protected abstract refreshDocuments(): Promise<void>;\n\n  abstract getDocument(iri: string): Promise<DocumentWithData | undefined>;\n\n  async getPredicates(): Promise<Predicate[]> {\n    await this.refreshDocuments();\n    const result = [...getCorePredicate()];\n    for (const document of this.documents) {\n      if (document.types.includes(RDFS_PROPERTY)) {\n        result.push(documentToPredicate(document));\n      }\n    }\n    return result;\n  }\n\n  async getPredicate(iri: string): Promise<Predicate | undefined> {\n    const predicates = await this.getPredicates();\n    for (const predicate of predicates) {\n      if (predicate.iri === iri) {\n        return predicate;\n      }\n    }\n    return undefined;\n  }\n\n  async getCodelist(types: string[]): Promise<string[]> {\n    await this.refreshDocuments();\n    const result: Set<string> = new Set();\n    // Add core items.\n    for (const type of types) {\n      for (const item of getCoreCodelistItem(type)) {\n        result.add(item);\n      }\n    }\n    // Add documents of required type.\n    for (const document of this.documents) {\n      const inSchema = document.properties[RDFS_HAS_IN_SCHEME] || [];\n      // We can add items if they are of given class or are part of a codelist.\n      if (isIntersecting(inSchema, types)) {\n        result.add(document.iri);\n\n      } else if (isIntersecting(document.types, types)) {\n        result.add(document.iri);\n      }\n    }\n    return [...result];\n  }\n\n  abstract storeDocument(document: DocumentWithData): Promise<void>;\n\n  abstract deleteDocument(iri: string): Promise<void>;\n\n  async getLabel(iri: string): Promise<string> {\n    const label = getCoreLabel(iri);\n    if (label !== undefined) {\n      return label;\n    }\n    for (const document of this.documents) {\n      if (document.iri === iri) {\n        return document.title;\n      }\n    }\n    return iri;\n  }\n\n}\n\nfunction isIntersecting(left: string[], right: string[]): boolean {\n  for (const leftItem of left) {\n    if (right.includes(leftItem)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction documentToPredicate(document: Document): Predicate {\n  const codelist = document.properties[RDFS_HAS_DOMAIN];\n  const listColour = document.properties[LIST_COLOR];\n  const listPriority = document.properties[LIST_PRIORITY];\n  return {\n    \"iri\": document.iri,\n    \"label\": document.title,\n    \"multiple\": true,\n    \"type\": codelist === undefined ?\n      PredicateEditType.String : PredicateEditType.Codelist,\n    \"codelist\": codelist || [],\n    \"domain\": undefined,\n    \"listColour\": listColour?.[0],\n    \"listPriority\": parseInt(listPriority?.[0] ?? \"0\"),\n  };\n}\n","import {Database} from \"./database-api\";\nimport axios from \"axios\";\nimport {SimpleDatabase} from \"./database-simple\";\nimport {DocumentWithData} from \"./model\";\n\n/**\n * Use API to fetch list of documents and work with documents. The list of\n * documents (index) is fetched on the client side.\n */\nclass HttpDatabase extends SimpleDatabase implements Database {\n\n  protected documentsAreDirty  = true;\n\n  getDatabaseLabel(): string {\n    return \"HTTP Based\";\n  }\n\n  protected async refreshDocuments() {\n    if (this.documentsAreDirty) {\n      const response = await axios.get(\"api/v1/documents\");\n      this.documents = response.data;\n      this.documentsAreDirty = false;\n    }\n  }\n\n  async getDocument(iri: string): Promise<DocumentWithData | undefined> {\n    const url = \"api/v1/documents?iri=\" + encodeURIComponent(iri);\n    const response = await axios.get(url);\n    return response.data;\n  }\n\n  async storeDocument(document: DocumentWithData): Promise<void> {\n    const url = \"api/v1/documents?iri=\" + encodeURIComponent(document.iri);\n    await axios.post(url, document);\n    this.documentsAreDirty = true;\n  }\n\n  async deleteDocument(iri: string): Promise<void> {\n    const url = \"api/v1/documents?iri=\" + encodeURIComponent(iri);\n    await axios.delete(url);\n    this.documentsAreDirty = true;\n  }\n\n}\n\nexport function createHttpDatabase(): Database {\n  return new HttpDatabase();\n}\n","import {Database} from \"./database-api\";\nimport {Document, DocumentWithData} from \"./model\";\nimport {SimpleDatabase} from \"./database-simple\";\n\nconst LIST_IDENTIFIER = \"documents-list\";\n\n/**\n * Client side implementation of database using localStorage. This\n * is limited in size.\n */\nclass LocalStorageDatabase extends SimpleDatabase implements Database {\n\n  getDatabaseLabel(): string {\n    return \"Local Storage\";\n  }\n\n  async deleteDocument(iri: string): Promise<void> {\n    localStorage.removeItem(iri);\n    // Update documents.\n    const index = this.findDocument(iri);\n    if (index === undefined) {\n      return;\n    }\n    this.documents.splice(index, 1);\n    this.saveDocuments();\n  }\n\n  protected findDocument(iri: string): number | undefined {\n    for (let index = 0; index < this.documents.length; ++index) {\n      const document = this.documents[index];\n      if (document.iri === iri) {\n        return index;\n      }\n    }\n    return undefined;\n  }\n\n  protected saveDocuments(): void {\n    const content = JSON.stringify(this.documents);\n    localStorage.setItem(LIST_IDENTIFIER, content);\n  }\n\n  async getDocument(iri: string): Promise<DocumentWithData | undefined> {\n    const contentAsString = localStorage.getItem(iri);\n    if (contentAsString === null) {\n      return undefined;\n    }\n    return JSON.parse(contentAsString) as DocumentWithData;\n  }\n\n  protected async refreshDocuments(): Promise<void> {\n    // We only load data for the first time, else we have\n    // actual version in memory.\n    if (this.documents.length > 0) {\n      return;\n    }\n    const contentAsString = localStorage.getItem(LIST_IDENTIFIER);\n    if (contentAsString === null) {\n      return;\n    }\n    this.documents = JSON.parse(contentAsString) as Document[];\n  }\n\n  async storeDocument(document: DocumentWithData): Promise<void> {\n    const content = JSON.stringify(document);\n    localStorage.setItem(document.iri, content);\n    // Update documents.\n    const newDocument: Document = {\n      \"iri\": document.iri,\n      \"types\": document.types,\n      \"title\": document.title,\n      \"description\": document.description,\n      \"created\": document.created,\n      \"properties\": document.properties,\n    };\n    const index = this.findDocument(document.iri);\n    if (index === undefined) {\n      this.documents = [newDocument, ...this.documents];\n    } else {\n      this.documents[index] = newDocument;\n    }\n    this.saveDocuments();\n  }\n\n}\n\nexport function createLocalStorageDatabase(): Database {\n  const result = new LocalStorageDatabase();\n  if (isFirstLoad()) {\n    addDemoContent(result);\n  }\n  return result;\n}\n\nfunction isFirstLoad(): boolean {\n  return localStorage.getItem(LIST_IDENTIFIER) === null;\n}\n\nfunction addDemoContent(database: LocalStorageDatabase) {\n  const now = new Date().toISOString().substr(0, 10);\n  database.storeDocument({\n    \"iri\": \"http://example.com/note/001\",\n    \"created\": now,\n    \"title\": \"Click me!\",\n    \"description\": \"Welcome to Knowledge Manager.\",\n    \"types\": [],\n    \"properties\": {\n      \"https://skodapetr.github.io/knoma/vocabulary#author\": [\n        \"Petr koda\"\n      ]\n    },\n    \"items\": [\n      {\n        \"identifier\": \"001\",\n        \"properties\": {},\n        \"created\": now,\n        \"text\": \"There might be a tutorial one day ... \",\n        \"image\": undefined,\n      },\n      {\n        \"identifier\": \"002\",\n        \"properties\": {},\n        \"created\": now,\n        \"text\": \"This instance is using your local storage to store data.\",\n        \"image\": undefined,\n      },\n    ],\n  });\n}\n","import {Database} from \"./database-api\";\nimport {DatabaseType, getConfiguration} from \"../application/configuration\";\nimport {createHttpDatabase} from \"./database-http\";\nimport {createLocalStorageDatabase} from \"./database-local-storage\";\n\nexport * from \"./database-api\";\nexport * from \"./model\";\nexport * from \"./model-factory\";\n\nconst database = createDatabase();\n\nfunction createDatabase(): Database {\n  const configuration = getConfiguration();\n  switch (configuration.database) {\n    case DatabaseType.HTTP:\n      return createHttpDatabase();\n    case DatabaseType.LOCAL_STORAGE:\n      return createLocalStorageDatabase();\n    default:\n      return createLocalStorageDatabase();\n  }\n}\n\nexport function getDatabase(): Database {\n  return database;\n}\n","<template>\n  <section>\n    <h2>Instance</h2>\n    <dl>\n      <dt>Database:</dt>\n      <dd>{{ database }}</dd>\n    </dl>\n  </section>\n</template>\n\n<script>\nimport {getDatabase} from \"../database\";\n\nexport default {\n  \"name\": \"AboutInstance\",\n  \"data\": () => ({\n    \"database\": getDatabase().getDatabaseLabel(),\n  }),\n};\n</script>","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./about-instance.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./about-instance.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./about-instance.vue?vue&type=template&id=7654d3bd&\"\nimport script from \"./about-instance.vue?vue&type=script&lang=js&\"\nexport * from \"./about-instance.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/knoma/knoma/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('7654d3bd')) {\n      api.createRecord('7654d3bd', component.options)\n    } else {\n      api.reload('7654d3bd', component.options)\n    }\n    module.hot.accept(\"./about-instance.vue?vue&type=template&id=7654d3bd&\", function () {\n      api.rerender('7654d3bd', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"client/about/about-instance.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _vm._m(0)\n}\nvar staticRenderFns = [\n  function() {\n    var _vm = this\n    var _h = _vm.$createElement\n    var _c = _vm._self._c || _h\n    return _c(\"section\", [\n      _c(\"h2\", [_vm._v(\"Keyboard\")]),\n      _vm._v(\" \"),\n      _c(\"dl\", [\n        _c(\"dt\", [_vm._v(\"ctrl + s\")]),\n        _vm._v(\" \"),\n        _c(\"dd\", [_vm._v(\"In document detail, save current document.\")]),\n        _vm._v(\" \"),\n        _c(\"dt\", [_vm._v(\"alt + a\")]),\n        _vm._v(\" \"),\n        _c(\"dd\", [_vm._v(\"In document detail, append new note.\")]),\n        _vm._v(\" \"),\n        _c(\"dt\", [_vm._v(\"alt + up\")]),\n        _vm._v(\" \"),\n        _c(\"dd\", [_vm._v(\"In note text area, focus previous note.\")]),\n        _vm._v(\" \"),\n        _c(\"dt\", [_vm._v(\"alt + down\")]),\n        _vm._v(\" \"),\n        _c(\"dd\", [_vm._v(\"In note text area, focus next note.\")])\n      ])\n    ])\n  }\n]\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./about-keyboard.vue?vue&type=template&id=a27e8be2&\"\nimport script from \"./about-keyboard.vue?vue&type=script&lang=js&\"\nexport * from \"./about-keyboard.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/knoma/knoma/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('a27e8be2')) {\n      api.createRecord('a27e8be2', component.options)\n    } else {\n      api.reload('a27e8be2', component.options)\n    }\n    module.hot.accept(\"./about-keyboard.vue?vue&type=template&id=a27e8be2&\", function () {\n      api.rerender('a27e8be2', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"client/about/about-keyboard.vue\"\nexport default component.exports","<template>\n  <section>\n    <h2>Keyboard</h2>\n    <dl>\n      <dt>ctrl + s</dt>\n      <dd>In document detail, save current document.</dd>\n      <dt>alt + a</dt>\n      <dd>In document detail, append new note.</dd>\n      <dt>alt + up</dt>\n      <dd>In note text area, focus previous note.</dd>\n      <dt>alt + down</dt>\n      <dd>In note text area, focus next note.</dd>\n    </dl>\n  </section>\n</template>\n\n<script>\nexport default {\n  \"name\": \"AboutKeyboard\",\n};\n</script>","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _vm._m(0)\n}\nvar staticRenderFns = [\n  function() {\n    var _vm = this\n    var _h = _vm.$createElement\n    var _c = _vm._self._c || _h\n    return _c(\"section\", [\n      _c(\"h2\", [_vm._v(\"Predicates\")]),\n      _vm._v(\" \"),\n      _c(\"dl\", [\n        _c(\"dt\", [_vm._v(\"In scheme\")]),\n        _vm._v(\" \"),\n        _c(\"dd\", [_vm._v(\"Part of a given scheme/codelist.\")]),\n        _vm._v(\" \"),\n        _c(\"dt\", [_vm._v(\"URL\")]),\n        _vm._v(\" \"),\n        _c(\"dd\"),\n        _vm._v(\" \"),\n        _c(\"dt\", [_vm._v(\"DOI\")]),\n        _vm._v(\" \"),\n        _c(\"dd\"),\n        _vm._v(\" \"),\n        _c(\"dt\", [_vm._v(\"Published\")]),\n        _vm._v(\" \"),\n        _c(\"dd\", [_vm._v(\"Time when the document were published/created.\")]),\n        _vm._v(\" \"),\n        _c(\"dt\", [_vm._v(\"Reference\")]),\n        _vm._v(\" \"),\n        _c(\"dd\", [_vm._v(\"Can be used to connect notes together.\")])\n      ])\n    ])\n  }\n]\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./about-predicates.vue?vue&type=template&id=4c2f6d44&\"\nimport script from \"./about-predicates.vue?vue&type=script&lang=js&\"\nexport * from \"./about-predicates.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/knoma/knoma/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('4c2f6d44')) {\n      api.createRecord('4c2f6d44', component.options)\n    } else {\n      api.reload('4c2f6d44', component.options)\n    }\n    module.hot.accept(\"./about-predicates.vue?vue&type=template&id=4c2f6d44&\", function () {\n      api.rerender('4c2f6d44', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"client/about/about-predicates.vue\"\nexport default component.exports","<template>\n  <section>\n    <h2>Predicates</h2>\n    <dl>\n      <dt>In scheme</dt>\n      <dd>Part of a given scheme/codelist.</dd>\n      <dt>URL</dt>\n      <dd />\n      <dt>DOI</dt>\n      <dd />\n      <dt>Published</dt>\n      <dd>Time when the document were published/created.</dd>\n      <dt>Reference</dt>\n      <dd>Can be used to connect notes together.</dd>\n    </dl>\n  </section>\n</template>\n\n<script>\nexport default {\n  \"name\": \"AboutPredicates\",\n};\n</script>\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _vm._m(0)\n}\nvar staticRenderFns = [\n  function() {\n    var _vm = this\n    var _h = _vm.$createElement\n    var _c = _vm._self._c || _h\n    return _c(\"section\", [\n      _c(\"h2\", [_vm._v(\"Content language\")]),\n      _vm._v(\" \"),\n      _c(\"ul\", [\n        _c(\"li\", [\n          _vm._v(\"\\n      Link with given \"),\n          _c(\"em\", [_vm._v(\"name\")]),\n          _vm._v(\" and \"),\n          _c(\"em\", [_vm._v(\"URL\")]),\n          _vm._v(\".\"),\n          _c(\"br\"),\n          _vm._v(\" \"),\n          _c(\"code\", [_vm._v(\"[{name}}]({URL}})\")]),\n          _c(\"br\"),\n          _vm._v(\n            \"\\n      There are some specific domains that can be used:\\n      \"\n          ),\n          _c(\"ul\", [\n            _c(\"li\", [\n              _c(\"code\", [_vm._v(\"doi://\")]),\n              _vm._v(\" - Reference to a document with DOI.\\n        \")\n            ]),\n            _vm._v(\" \"),\n            _c(\"li\", [\n              _c(\"code\", [_vm._v(\"cite://\")]),\n              _vm._v(\" - Reference to a citation inside a document.\\n        \")\n            ])\n          ])\n        ]),\n        _vm._v(\" \"),\n        _c(\"li\", [\n          _vm._v(\"\\n      Highlight given word as important.\"),\n          _c(\"br\"),\n          _vm._v(\" \"),\n          _c(\"code\", [_vm._v(\"**Keyword**\")])\n        ]),\n        _vm._v(\" \"),\n        _c(\"li\", [\n          _vm._v(\"\\n      Code without any other specification.\"),\n          _c(\"br\"),\n          _vm._v(\" \"),\n          _c(\"code\", [_vm._v(\"```code```\")])\n        ]),\n        _vm._v(\" \"),\n        _c(\"li\", [\n          _vm._v(\"\\n      Code of given \"),\n          _c(\"em\", [_vm._v(\"{type}\")]),\n          _vm._v(\":\\n      \"),\n          _c(\"pre\", [_c(\"code\", [_vm._v(\"```{type}\\n...\\n```\")])]),\n          _vm._v(\"\\n      You can use \"),\n          _c(\"code\", [_vm._v(\"```Quote...\")]),\n          _vm._v(\" to mark a quote from the source\\n      document.\\n    \")\n        ]),\n        _vm._v(\" \"),\n        _c(\"li\", [\n          _vm._v(\"\\n      Item list:\\n      \"),\n          _c(\"pre\", [_c(\"code\", [_vm._v(\"* Item\\n * Item\\n * Item\")])])\n        ])\n      ])\n    ])\n  }\n]\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./about-text.vue?vue&type=template&id=2c36ff56&\"\nimport script from \"./about-text.vue?vue&type=script&lang=js&\"\nexport * from \"./about-text.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/knoma/knoma/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('2c36ff56')) {\n      api.createRecord('2c36ff56', component.options)\n    } else {\n      api.reload('2c36ff56', component.options)\n    }\n    module.hot.accept(\"./about-text.vue?vue&type=template&id=2c36ff56&\", function () {\n      api.rerender('2c36ff56', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"client/about/about-text.vue\"\nexport default component.exports","<template>\n  <section>\n    <h2>Content language</h2>\n    <ul>\n      <li>\n        Link with given <em>name</em> and <em>URL</em>.<br>\n        <code>[{name}}]({URL}})</code><br>\n        There are some specific domains that can be used:\n        <ul>\n          <li>\n            <code>doi://</code> - Reference to a document with DOI.\n          </li>\n          <li>\n            <code>cite://</code> - Reference to a citation inside a document.\n          </li>\n        </ul>\n      </li>\n      <li>\n        Highlight given word as important.<br>\n        <code>**Keyword**</code>\n      </li>\n      <li>\n        Code without any other specification.<br>\n        <code>```code```</code>\n      </li>\n      <li>\n        Code of given <em>{type}</em>:\n        <pre><code>```{type}\n  ...\n  ```</code></pre>\n        You can use <code>```Quote...</code> to mark a quote from the source\n        document.\n      </li>\n      <li>\n        Item list:\n        <pre><code>* Item\n   * Item\n   * Item</code></pre>\n      </li>\n    </ul>\n  </section>\n</template>\n\n<script>\nexport default {\n  \"name\": \"AboutText\",\n};\n</script>\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _vm._m(0)\n}\nvar staticRenderFns = [\n  function() {\n    var _vm = this\n    var _h = _vm.$createElement\n    var _c = _vm._self._c || _h\n    return _c(\"section\", [\n      _c(\"h2\", [_vm._v(\"Types\")]),\n      _vm._v(\" \"),\n      _c(\"dl\", [\n        _c(\"dt\", [_vm._v(\"Concept Scheme\")]),\n        _vm._v(\" \"),\n        _c(\"dd\", [\n          _vm._v(\"A concept lists that can be used as values in codelists.\")\n        ]),\n        _vm._v(\" \"),\n        _c(\"dt\", [_vm._v(\"Concept\")]),\n        _vm._v(\" \"),\n        _c(\"dd\", [_vm._v(\"Member of concept scheme.\")]),\n        _vm._v(\" \"),\n        _c(\"dt\", [_vm._v(\"Property\")]),\n        _vm._v(\" \"),\n        _c(\"dd\", [_vm._v(\"This document can be used as a property.\")])\n      ])\n    ])\n  }\n]\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./about-types.vue?vue&type=template&id=99b7bcfe&\"\nimport script from \"./about-types.vue?vue&type=script&lang=js&\"\nexport * from \"./about-types.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/knoma/knoma/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('99b7bcfe')) {\n      api.createRecord('99b7bcfe', component.options)\n    } else {\n      api.reload('99b7bcfe', component.options)\n    }\n    module.hot.accept(\"./about-types.vue?vue&type=template&id=99b7bcfe&\", function () {\n      api.rerender('99b7bcfe', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"client/about/about-types.vue\"\nexport default component.exports","<template>\n  <section>\n    <h2>Types</h2>\n    <dl>\n      <dt>Concept Scheme</dt>\n      <dd>A concept lists that can be used as values in codelists.</dd>\n      <dt>Concept</dt>\n      <dd>Member of concept scheme.</dd>\n      <dt>Property</dt>\n      <dd>This document can be used as a property.</dd>\n    </dl>\n  </section>\n</template>\n\n<script>\nexport default {\n  \"name\": \"AboutTypes\",\n};\n</script>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./about.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./about.vue?vue&type=script&lang=js&\"","<template>\n  <v-container>\n    <v-tabs\n      v-model=\"tab\"\n      grow\n    >\n      <v-tab>Instance</v-tab>\n      <v-tab>Keyboard</v-tab>\n      <v-tab>Types</v-tab>\n      <v-tab>Predicates</v-tab>\n      <v-tab>Text</v-tab>\n    </v-tabs>\n    <v-tabs-items\n      v-model=\"tab\"\n      style=\"padding: 2rem;\"\n    >\n      <v-tab-item>\n        <app-instance />\n      </v-tab-item>\n      <v-tab-item>\n        <app-keyboard />\n      </v-tab-item>\n      <v-tab-item>\n        <app-types />\n      </v-tab-item>\n      <v-tab-item>\n        <app-predicates />\n      </v-tab-item>\n      <v-tab-item>\n        <app-text />\n      </v-tab-item>\n    </v-tabs-items>\n  </v-container>\n</template>\n\n<script>\nimport AboutInstance from \"./about-instance\";\nimport AboutKeyboard from \"./about-keyboard\";\nimport AboutPredicates from \"./about-predicates\";\nimport AboutText from \"./about-text\";\nimport AboutTypes from \"./about-types\";\n\nexport default {\n  \"name\": \"About\",\n  \"components\": {\n    \"app-instance\": AboutInstance,\n    \"app-keyboard\": AboutKeyboard,\n    \"app-predicates\": AboutPredicates,\n    \"app-text\": AboutText,\n    \"app-types\": AboutTypes,\n  },\n  \"data\": () => ({\n    \"tab\": 0,\n  }),\n};\n</script>\n","import { render, staticRenderFns } from \"./about.vue?vue&type=template&id=718a2cd5&\"\nimport script from \"./about.vue?vue&type=script&lang=js&\"\nexport * from \"./about.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/knoma/knoma/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('718a2cd5')) {\n      api.createRecord('718a2cd5', component.options)\n    } else {\n      api.reload('718a2cd5', component.options)\n    }\n    module.hot.accept(\"./about.vue?vue&type=template&id=718a2cd5&\", function () {\n      api.rerender('718a2cd5', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"client/about/about.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"v-container\",\n    [\n      _c(\"app-header\", {\n        on: {\n          \"edit-properties\": _vm.onOpenPropertiesDialog,\n          \"edit-type\": _vm.onOpenNoteTypeDialog,\n          save: _vm.onSave,\n          close: _vm.onClose\n        },\n        model: {\n          value: _vm.document,\n          callback: function($$v) {\n            _vm.document = $$v\n          },\n          expression: \"document\"\n        }\n      }),\n      _vm._v(\" \"),\n      _c(\"app-items\", {\n        attrs: { \"document-iri\": _vm.document.iri },\n        on: {\n          \"edit-properties\": _vm.onOpenPropertiesDialog,\n          \"edit-type\": _vm.onOpenNoteTypeDialog\n        },\n        model: {\n          value: _vm.document.items,\n          callback: function($$v) {\n            _vm.$set(_vm.document, \"items\", $$v)\n          },\n          expression: \"document.items\"\n        }\n      }),\n      _vm._v(\" \"),\n      _c(\"app-property-dialog\", {\n        attrs: {\n          visible: _vm.propertyDialog.open,\n          types: _vm.propertyDialog.types\n        },\n        on: {\n          save: _vm.onSavePropertiesDialog,\n          close: _vm.onClosePropertiesDialog\n        },\n        model: {\n          value: _vm.propertyDialog.data,\n          callback: function($$v) {\n            _vm.$set(_vm.propertyDialog, \"data\", $$v)\n          },\n          expression: \"propertyDialog.data\"\n        }\n      }),\n      _vm._v(\" \"),\n      _c(\"app-codelist-dialog\", {\n        attrs: {\n          visible: _vm.typeDialog.open,\n          codelist: [\"http://www.w3.org/2000/01/rdf-schema#Class\"]\n        },\n        on: {\n          save: _vm.onSaveNoteTypeDialog,\n          close: _vm.onCloseNoteTypeDialog\n        },\n        model: {\n          value: _vm.typeDialog.data,\n          callback: function($$v) {\n            _vm.$set(_vm.typeDialog, \"data\", $$v)\n          },\n          expression: \"typeDialog.data\"\n        }\n      }),\n      _vm._v(\" \"),\n      _c(\n        \"v-layout\",\n        { staticClass: \"mt-6\" },\n        [\n          _c(\"v-btn\", { staticClass: \"mr-4\", on: { click: _vm.onSave } }, [\n            _vm._v(\"\\n      Save\\n    \")\n          ]),\n          _vm._v(\" \"),\n          _c(\"v-btn\", { on: { click: _vm.onClose } }, [\n            _vm._v(\"\\n      Close\\n    \")\n          ])\n        ],\n        1\n      )\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"v-container\",\n    [\n      _c(\n        \"div\",\n        [\n          _c(\n            \"v-btn\",\n            {\n              staticClass: \"ml-2 mr-4\",\n              attrs: { icon: \"\" },\n              on: { click: _vm.onCopyIri }\n            },\n            [_c(\"v-icon\", [_vm._v(\"\\n        mdi-share-variant\\n      \")])],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"v-btn\",\n            {\n              staticClass: \"mr-4\",\n              attrs: { icon: \"\" },\n              on: {\n                click: function($event) {\n                  return _vm.onEditProperties(_vm.value)\n                }\n              }\n            },\n            [_c(\"v-icon\", [_vm._v(\"\\n        mdi-pencil\\n      \")])],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\"app-types\", {\n            attrs: { value: _vm.value },\n            on: { \"edit-type\": _vm.onEditType }\n          })\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\"v-text-field\", {\n        attrs: { value: _vm.value.title, label: \"Title *\", required: \"\" },\n        on: { input: _vm.onChangeTitle }\n      }),\n      _vm._v(\" \"),\n      _c(\"v-textarea\", {\n        attrs: {\n          value: _vm.value.description,\n          \"auto-grow\": \"\",\n          clearable: \"\",\n          \"clear-icon\": \"mdi-close-circle\",\n          rows: \"1\",\n          label: \"Description\"\n        },\n        on: { input: _vm.onChangeDescription }\n      }),\n      _vm._v(\" \"),\n      _c(\"properties-preview\", { attrs: { value: _vm.value } }),\n      _vm._v(\" \"),\n      _c(\n        \"v-layout\",\n        [\n          _c(\"v-btn\", { staticClass: \"mr-4\", on: { click: _vm.onSave } }, [\n            _vm._v(\"\\n      Save\\n    \")\n          ]),\n          _vm._v(\" \"),\n          _c(\"v-btn\", { on: { click: _vm.onClose } }, [\n            _vm._v(\"\\n      Close\\n    \")\n          ])\n        ],\n        1\n      )\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"span\",\n    [\n      _c(\"app-tags\", {\n        attrs: { value: _vm.value.types, small: \"\" },\n        on: { click: _vm.onEditType }\n      }),\n      _vm._v(\" \"),\n      _c(\n        \"v-btn\",\n        {\n          directives: [\n            {\n              name: \"show\",\n              rawName: \"v-show\",\n              value: _vm.value.types.length === 0,\n              expression: \"value.types.length === 0\"\n            }\n          ],\n          attrs: { icon: \"\" },\n          on: { click: _vm.onEditType }\n        },\n        [_c(\"v-icon\", [_vm._v(\"\\n      mdi-plus\\n    \")])],\n        1\n      )\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"span\",\n    _vm._l(_vm.tags, function(tag) {\n      return _c(\n        \"v-chip\",\n        {\n          key: tag.iri,\n          staticClass: \"mr-2\",\n          attrs: { small: _vm.small },\n          on: { click: _vm.onClick }\n        },\n        [_vm._v(\"\\n    \" + _vm._s(tag.label) + \"\\n  \")]\n      )\n    }),\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\n  <span>\n    <v-chip\n      v-for=\"tag in tags\"\n      :key=\"tag.iri\"\n      :small=\"small\"\n      class=\"mr-2\"\n      @click=\"onClick\"\n    >\n      {{ tag.label }}\n    </v-chip>\n  </span>\n</template>\n\n<script>\nimport {getDatabase} from \"../database\";\n\nexport default {\n  \"name\": \"TagLine\",\n  \"props\": {\n    \"value\": {\"type\": Array, \"required\": true},\n    \"small\": {\"type\": Boolean, \"default\": false},\n  },\n  \"data\": () => ({\n    \"tags\": [],\n  }),\n  \"watch\": {\n    \"value\": function () {\n      this.computeTags();\n    },\n  },\n  \"mounted\": function () {\n    this.computeTags();\n  },\n  \"methods\": {\n    \"computeTags\": async function () {\n      const result = [];\n      const database = getDatabase();\n      for (const iri of this.value) {\n        result.push({\n          \"iri\": iri,\n          \"label\": await database.getLabel(iri),\n        });\n      }\n      this.tags = result;\n    },\n    \"onClick\": function () {\n      this.$emit(\"click\");\n    },\n  },\n};\n</script>","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tag-line.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tag-line.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./tag-line.vue?vue&type=template&id=764ad2ea&\"\nimport script from \"./tag-line.vue?vue&type=script&lang=js&\"\nexport * from \"./tag-line.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/knoma/knoma/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('764ad2ea')) {\n      api.createRecord('764ad2ea', component.options)\n    } else {\n      api.reload('764ad2ea', component.options)\n    }\n    module.hot.accept(\"./tag-line.vue?vue&type=template&id=764ad2ea&\", function () {\n      api.rerender('764ad2ea', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"client/components/tag-line.vue\"\nexport default component.exports","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./type-line.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./type-line.vue?vue&type=script&lang=js&\"","<template>\n  <span>\n    <app-tags\n      :value=\"value.types\"\n      small\n      @click=\"onEditType\"\n    />\n    <v-btn\n      v-show=\"value.types.length === 0\"\n      icon\n      @click=\"onEditType\"\n    >\n      <v-icon>\n        mdi-plus\n      </v-icon>\n    </v-btn>\n  </span>\n</template>\n\n<script>\nimport TagLine from \"../components/tag-line\";\n\nexport default {\n  \"name\": \"TypeLine\",\n  \"components\": {\n    \"app-tags\": TagLine,\n  },\n  \"props\": {\n    \"value\": {\"type\": Object, \"required\": true},\n  },\n  \"methods\": {\n    \"onEditType\": function () {\n      this.$emit(\"edit-type\", this.value);\n    },\n  },\n};\n</script>","import { render, staticRenderFns } from \"./type-line.vue?vue&type=template&id=c53730b6&\"\nimport script from \"./type-line.vue?vue&type=script&lang=js&\"\nexport * from \"./type-line.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/knoma/knoma/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('c53730b6')) {\n      api.createRecord('c53730b6', component.options)\n    } else {\n      api.reload('c53730b6', component.options)\n    }\n    module.hot.accept(\"./type-line.vue?vue&type=template&id=c53730b6&\", function () {\n      api.rerender('c53730b6', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"client/document-detail/type-line.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"v-container\",\n    { staticClass: \"outer\" },\n    [\n      _vm._v(\"\\n  Properties:\\n  \"),\n      _vm._l(_vm.content, function(predicate) {\n        return _c(\n          \"dl\",\n          { key: predicate.iri },\n          [\n            _c(\"dt\", [_vm._v(_vm._s(predicate.label) + \":\")]),\n            _vm._v(\" \"),\n            _vm._l(predicate.items, function(item, index) {\n              return _c(\"dd\", { key: index }, [\n                _vm._v(\"\\n      \" + _vm._s(item) + \"\\n    \")\n              ])\n            })\n          ],\n          2\n        )\n      })\n    ],\n    2\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\n  <v-container class=\"outer\">\n    Properties:\n    <dl\n      v-for=\"predicate of content\"\n      :key=\"predicate.iri\"\n    >\n      <dt>{{ predicate.label }}:</dt>\n      <dd\n        v-for=\"(item, index) in predicate.items\"\n        :key=\"index\"\n      >\n        {{ item }}\n      </dd>\n    </dl>\n  </v-container>\n</template>\n\n<script>\nimport {getDatabase} from \"../database\";\n\nexport default {\n  \"name\": \"DocumentPropertiesPreview\",\n  \"props\": {\n    \"value\": {\"type\": Object, \"required\": true},\n  },\n  \"data\": () => ({\n    \"loading\": false,\n    \"content\": [],\n  }),\n  \"watch\": {\n    \"value.properties\": async function (nextProperties) {\n      await this.updateProperties(nextProperties);\n    },\n  },\n  \"mounted\": async function () {\n    await this.updateProperties(this.value.properties);\n  },\n  \"methods\": {\n    \"updateProperties\": async function(properties) {\n      const database = getDatabase();\n      const result = [];\n      for (const [predicateIri, items] of Object.entries(properties)) {\n        const predicate = await database.getPredicate(predicateIri);\n        const itemsToShow = await predicateToValues(database, predicate, items);\n        result.push({\n          \"iri\": predicateIri,\n          \"label\": predicate.label,\n          \"items\": itemsToShow,\n        });\n      }\n      result.sort((left, right) => left.label.localeCompare(right.label));\n      this.content = result;\n    },\n  },\n};\n\nasync function predicateToValues(database, predicate, values) {\n  let result = [];\n  switch (predicate.type) {\n    case \"codelist\":\n      for (const item of values) {\n        result.push(await database.getLabel(item));\n      }\n      break;\n    default:\n      result = values;\n      break;\n  }\n  return result;\n}\n\n</script>\n\n<style scoped>\n.outer {\n  border-bottom: 1px solid gray;\n  margin-bottom: 1rem;\n  padding-top: 0;\n}\ndl {\n  display: flex;\n  flex-wrap: wrap;\n  margin-left: 1rem;\n}\ndl dd {\n  margin-left: 1rem;\n}\ndl dd:after {\n  content: \",\";\n}\ndl dd:last-child:after {\n  content: \"\";\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./document-properties-preview.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./document-properties-preview.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./document-properties-preview.vue?vue&type=template&id=e3a9abc4&scoped=true&\"\nimport script from \"./document-properties-preview.vue?vue&type=script&lang=js&\"\nexport * from \"./document-properties-preview.vue?vue&type=script&lang=js&\"\nimport style0 from \"./document-properties-preview.vue?vue&type=style&index=0&id=e3a9abc4&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e3a9abc4\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/knoma/knoma/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('e3a9abc4')) {\n      api.createRecord('e3a9abc4', component.options)\n    } else {\n      api.reload('e3a9abc4', component.options)\n    }\n    module.hot.accept(\"./document-properties-preview.vue?vue&type=template&id=e3a9abc4&scoped=true&\", function () {\n      api.rerender('e3a9abc4', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"client/document-detail/document-properties-preview.vue\"\nexport default component.exports","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./document-detail-header.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./document-detail-header.vue?vue&type=script&lang=js&\"","<template>\n  <v-container>\n    <div>\n      <v-btn\n        icon\n        class=\"ml-2 mr-4\"\n        @click=\"onCopyIri\"\n      >\n        <v-icon>\n          mdi-share-variant\n        </v-icon>\n      </v-btn>\n      <v-btn\n        icon\n        class=\"mr-4\"\n        @click=\"onEditProperties(value)\"\n      >\n        <v-icon>\n          mdi-pencil\n        </v-icon>\n      </v-btn>\n      <app-types\n        :value=\"value\"\n        @edit-type=\"onEditType\"\n      />\n    </div>\n    <v-text-field\n      :value=\"value.title\"\n      label=\"Title *\"\n      required\n      @input=\"onChangeTitle\"\n    />\n    <v-textarea\n      :value=\"value.description\"\n      auto-grow\n      clearable\n      clear-icon=\"mdi-close-circle\"\n      rows=\"1\"\n      label=\"Description\"\n      @input=\"onChangeDescription\"\n    />\n    <properties-preview :value=\"value\" />\n    <v-layout>\n      <v-btn\n        class=\"mr-4\"\n        @click=\"onSave\"\n      >\n        Save\n      </v-btn>\n      <v-btn @click=\"onClose\">\n        Close\n      </v-btn>\n    </v-layout>\n  </v-container>\n</template>\n\n<script>\nimport TypeLine from \"./type-line\";\nimport PropertiesPreview from \"./document-properties-preview\";\n\nexport default {\n  \"name\": \"DocumentDetailHeader\",\n  \"components\": {\n    \"app-types\": TypeLine,\n    \"properties-preview\": PropertiesPreview,\n  },\n  \"props\": {\n    \"value\": {\"type\": Object, \"required\": true},\n  },\n  \"methods\": {\n    \"onCopyIri\": function () {\n      navigator.clipboard.writeText(this.value.iri);\n    },\n    \"onChangeTitle\": function (value) {\n      this.$emit(\"input\", {\n        ...this.value,\n        \"title\": value,\n      });\n    },\n    \"onChangeDescription\": function (value) {\n      this.$emit(\"input\", {\n        ...this.value,\n        \"description\": value,\n      });\n    },\n    \"onEditType\": function(owner) {\n      this.$emit(\"edit-type\", owner);\n    },\n    \"onEditProperties\": function() {\n      this.$emit(\"edit-properties\", this.value);\n    },\n    \"onSave\": function () {\n      this.$emit(\"save\");\n    },\n    \"onClose\": function () {\n      this.$emit(\"close\");\n    },\n  },\n};\n</script>\n","import { render, staticRenderFns } from \"./document-detail-header.vue?vue&type=template&id=22bbe949&\"\nimport script from \"./document-detail-header.vue?vue&type=script&lang=js&\"\nexport * from \"./document-detail-header.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/knoma/knoma/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('22bbe949')) {\n      api.createRecord('22bbe949', component.options)\n    } else {\n      api.reload('22bbe949', component.options)\n    }\n    module.hot.accept(\"./document-detail-header.vue?vue&type=template&id=22bbe949&\", function () {\n      api.rerender('22bbe949', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"client/document-detail/document-detail-header.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"v-list\",\n    [\n      _vm._l(_vm.value, function(item, index) {\n        return _c(\n          \"v-list-item\",\n          { key: item.iri },\n          [\n            _c(\"app-item\", {\n              attrs: { \"document-iri\": _vm.documentIri, value: item },\n              on: {\n                input: function(v) {\n                  return _vm.onChange(index, v)\n                },\n                add: function() {\n                  return _vm.onInsert(index)\n                },\n                delete: function() {\n                  return _vm.onDelete(index)\n                },\n                \"edit-properties\": _vm.onEditProperties,\n                \"edit-type\": _vm.onEditType\n              }\n            })\n          ],\n          1\n        )\n      }),\n      _vm._v(\" \"),\n      _c(\n        \"v-list-item\",\n        [\n          _c(\n            \"v-btn\",\n            {\n              on: {\n                click: function($event) {\n                  return _vm.onAppend()\n                }\n              }\n            },\n            [\n              _c(\"v-icon\", { attrs: { color: \"green\" } }, [\n                _vm._v(\"\\n        mdi-plus\\n      \")\n              ])\n            ],\n            1\n          )\n        ],\n        1\n      )\n    ],\n    2\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"v-card\",\n    { staticClass: \"ma-2\", attrs: { width: \"100%\" } },\n    [\n      _c(\n        \"v-card-title\",\n        { staticClass: \"pb-0\" },\n        [\n          _c(\n            \"v-btn\",\n            {\n              staticClass: \"ml-2 mr-4\",\n              attrs: { icon: \"\" },\n              on: { click: _vm.onCopyIri }\n            },\n            [_c(\"v-icon\", [_vm._v(\"\\n        mdi-share-variant\\n      \")])],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"v-btn\",\n            {\n              staticClass: \"mr-4\",\n              attrs: { icon: \"\" },\n              on: {\n                click: function($event) {\n                  return _vm.onEditProperties(_vm.value)\n                }\n              }\n            },\n            [_c(\"v-icon\", [_vm._v(\"\\n        mdi-pencil\\n      \")])],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\"v-spacer\"),\n          _vm._v(\" \"),\n          _c(\n            \"v-btn\",\n            {\n              staticClass: \"mr-4\",\n              attrs: { icon: \"\" },\n              on: { click: _vm.onDelete }\n            },\n            [\n              _c(\"v-icon\", { attrs: { color: \"red\" } }, [\n                _vm._v(\"\\n        mdi-minus\\n      \")\n              ])\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"v-btn\",\n            {\n              attrs: { icon: \"\" },\n              on: {\n                click: function($event) {\n                  return _vm.onAdd()\n                }\n              }\n            },\n            [\n              _c(\"v-icon\", { attrs: { color: \"green\" } }, [\n                _vm._v(\"\\n        mdi-plus\\n      \")\n              ])\n            ],\n            1\n          )\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"v-card-text\",\n        { staticClass: \"pb-0\" },\n        [\n          _c(\"v-textarea\", {\n            staticClass: \"note-content-input\",\n            attrs: {\n              value: _vm.value.text,\n              \"auto-grow\": \"\",\n              clearable: \"\",\n              \"clear-icon\": \"mdi-close-circle\",\n              rows: \"1\",\n              label: \"Content\"\n            },\n            on: {\n              input: _vm.onChangeContent,\n              paste: _vm.onPaste,\n              keydown: _vm.onKeyDown\n            }\n          }),\n          _vm._v(\" \"),\n          _c(\"img\", {\n            directives: [\n              {\n                name: \"show\",\n                rawName: \"v-show\",\n                value: _vm.value.image && _vm.showImage,\n                expression: \"value.image && showImage\"\n              }\n            ],\n            staticStyle: {\n              \"border-style\": \"ridge\",\n              \"background-color\": \"wheat\",\n              width: \"100%\"\n            },\n            attrs: { src: _vm.value.image }\n          })\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"v-card-actions\",\n        [\n          _c(\n            \"v-btn\",\n            {\n              directives: [\n                {\n                  name: \"show\",\n                  rawName: \"v-show\",\n                  value: _vm.value.image,\n                  expression: \"value.image\"\n                }\n              ],\n              on: { click: _vm.onToggleImage }\n            },\n            [_vm._v(\"\\n      Toggle Image\\n    \")]\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"v-btn\",\n            {\n              directives: [\n                {\n                  name: \"show\",\n                  rawName: \"v-show\",\n                  value: _vm.value.image && _vm.showImage,\n                  expression: \"value.image && showImage\"\n                }\n              ],\n              on: { click: _vm.onClearImage }\n            },\n            [_vm._v(\"\\n      Clear Image\\n    \")]\n          )\n        ],\n        1\n      )\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\n  <v-card\n    class=\"ma-2\"\n    width=\"100%\"\n  >\n    <v-card-title class=\"pb-0\">\n      <v-btn\n        icon\n        class=\"ml-2 mr-4\"\n        @click=\"onCopyIri\"\n      >\n        <v-icon>\n          mdi-share-variant\n        </v-icon>\n      </v-btn>\n      <v-btn\n        icon\n        class=\"mr-4\"\n        @click=\"onEditProperties(value)\"\n      >\n        <v-icon>\n          mdi-pencil\n        </v-icon>\n      </v-btn>\n      <v-spacer />\n      <v-btn\n        icon\n        class=\"mr-4\"\n        @click=\"onDelete\"\n      >\n        <v-icon color=\"red\">\n          mdi-minus\n        </v-icon>\n      </v-btn>\n      <v-btn\n        icon\n        @click=\"onAdd()\"\n      >\n        <v-icon color=\"green\">\n          mdi-plus\n        </v-icon>\n      </v-btn>\n    </v-card-title>\n    <v-card-text class=\"pb-0\">\n      <v-textarea\n        :value=\"value.text\"\n        class=\"note-content-input\"\n        auto-grow\n        clearable\n        clear-icon=\"mdi-close-circle\"\n        rows=\"1\"\n        label=\"Content\"\n        @input=\"onChangeContent\"\n        @paste=\"onPaste\"\n        @keydown=\"onKeyDown\"\n      />\n      <img\n        v-show=\"value.image && showImage\"\n        :src=\"value.image\"\n        style=\"border-style: ridge;background-color: wheat;width: 100%;\"\n      >\n    </v-card-text>\n    <v-card-actions>\n      <v-btn\n        v-show=\"value.image\"\n        @click=\"onToggleImage\"\n      >\n        Toggle Image\n      </v-btn>\n      <v-btn\n        v-show=\"value.image && showImage\"\n        @click=\"onClearImage\"\n      >\n        Clear Image\n      </v-btn>\n    </v-card-actions>\n  </v-card>\n</template>\n\n<script>\nimport Vue from \"vue\";\nimport {onKeyAltDown} from \"./note-edit-service\";\n\nexport default {\n  \"name\": \"NoteEdit\",\n  \"props\": {\n    \"value\": {\"type\": Object, \"required\": true},\n    \"documentIri\": {\"type\": String, \"required\": true},\n  },\n  \"data\": () => ({\n    \"showImage\": false,\n  }),\n  \"methods\": {\n    \"onCopyIri\": function () {\n      const iri = this.documentIri + \"/notes/\" + this.value.identifier;\n      navigator.clipboard.writeText(iri);\n    },\n    \"onChangeContent\": function (value) {\n      this.$emit(\"input\", {\n        ...this.value,\n        \"text\": value,\n      });\n    },\n    \"onClearImage\": function () {\n      this.$emit(\"input\", {\n        ...this.value,\n        \"image\": undefined,\n      });\n    },\n    \"onDelete\": function () {\n      this.$emit(\"delete\");\n    },\n    \"onAdd\": function () {\n      this.$emit(\"add\");\n    },\n    \"onKeyDown\": function (event) {\n      if (event.altKey) {\n        let result = onKeyAltDown(this.value.text, event);\n        if (result === null) {\n          return;\n        }\n        this.$emit(\"input\", {\n          ...this.value,\n          \"text\": result.value,\n        });\n        Vue.nextTick(() => {\n          event.target.selectionStart = result.positionStart;\n          event.target.selectionEnd = result.positionEnd;\n        });\n        event.preventDefault();\n      }\n    },\n    \"onPaste\": function (event) {\n      for (const item of event.clipboardData.items) {\n        if (!item.type.includes(\"image\")) {\n          continue;\n        }\n        event.preventDefault();\n        const file = item.getAsFile();\n        const reader = new FileReader();\n        reader.onload = () => {\n          const imageInBase64 = reader.result;\n          this.$emit(\"input\", {\n            ...this.value,\n            \"image\": imageInBase64,\n          });\n        };\n        reader.readAsDataURL(file);\n        break;\n      }\n    },\n    \"onEditProperties\": function () {\n      this.$emit(\"edit-properties\", this.value);\n    },\n    \"onToggleImage\": function () {\n      this.showImage = !this.showImage;\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./note-edit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./note-edit.vue?vue&type=script&lang=js&\"","export type TextWithCursor = {\n  value: string;\n  positionStart: number;\n  positionEnd: number;\n}\n\nexport function onKeyAltDown(\n  text: string, event: KeyboardEvent): TextWithCursor | null {\n  const target = event.target as HTMLInputElement;\n  const start = target.selectionStart;\n  const end = target.selectionEnd;\n  if (start === null || end === null) {\n    return null;\n  }\n  return null;\n}\n\n\n","import { render, staticRenderFns } from \"./note-edit.vue?vue&type=template&id=25985903&\"\nimport script from \"./note-edit.vue?vue&type=script&lang=js&\"\nexport * from \"./note-edit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/knoma/knoma/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('25985903')) {\n      api.createRecord('25985903', component.options)\n    } else {\n      api.reload('25985903', component.options)\n    }\n    module.hot.accept(\"./note-edit.vue?vue&type=template&id=25985903&\", function () {\n      api.rerender('25985903', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"client/document-detail/note-edit.vue\"\nexport default component.exports","import {createNote, Note} from \"../database\";\n\nexport function createNewNote(iri: string, notes: Note[]): Note {\n  const nextIndex = notes.map(note => Number(note.identifier))\n    .reduce((left, right) => Math.max(left, right), 0) + 1;\n  return createNote(String(nextIndex).padStart(3, \"0\"), \"\");\n}\n\nexport function getTextAreas(): HTMLInputElement[] {\n  const selector = \".note-content-input textarea\";\n  return [...window.document.querySelectorAll(selector) as any];\n}\n\nexport function focusPreviousNote(): void {\n  const nodes = getTextAreas();\n  const active = document.activeElement as any;\n  const index = nodes.indexOf(active);\n  if (index < 1 || index - 1 > nodes.length) {\n    return;\n  }\n  nodes[index - 1].focus();\n}\n\nexport function focusNextNote(): void {\n  const nodes = getTextAreas();\n  const active = document.activeElement as any;\n  const index = nodes.indexOf(active);\n  if (index === -1 || index + 1 >= nodes.length) {\n    return;\n  }\n  nodes[index + 1].focus();\n}","import {DocumentWithData, Note} from \"./model\";\nimport {getConfiguration} from \"../application/configuration\";\n\nexport function createDocument(): DocumentWithData {\n  const configuration = getConfiguration();\n  return {\n    \"iri\": configuration.domain + createIdentifier(),\n    \"types\": [],\n    \"title\": \"\",\n    \"description\": \"\",\n    \"created\": new Date().toISOString().substr(0, 10),\n    \"properties\": {},\n    \"items\": [],\n  };\n}\n\nfunction createIdentifier() {\n  const time = new Date().getTime();\n  return time + \"-xxxx-yxxx\".replace(/[xy]/g, function (c) {\n    const r = Math.random() * 16 | 0, v = c == \"x\" ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n}\n\nexport function createNote(identifier: string, text: string): Note {\n  return {\n    \"identifier\": identifier,\n    \"properties\": {},\n    \"created\": new Date().toISOString().substr(0, 10),\n    \"text\": text,\n    \"image\": undefined,\n  };\n}\n","<template>\n  <v-list>\n    <v-list-item\n      v-for=\"(item, index) in value\"\n      :key=\"item.iri\"\n    >\n      <app-item\n        :document-iri=\"documentIri\"\n        :value=\"item\"\n        @input=\"(v) => onChange(index, v)\"\n        @add=\"() => onInsert(index)\"\n        @delete=\"() => onDelete(index)\"\n        @edit-properties=\"onEditProperties\"\n        @edit-type=\"onEditType\"\n      />\n    </v-list-item>\n    <v-list-item>\n      <v-btn @click=\"onAppend()\">\n        <v-icon color=\"green\">\n          mdi-plus\n        </v-icon>\n      </v-btn>\n    </v-list-item>\n  </v-list>\n</template>\n\n<script>\nimport NoteItemEdit from \"./note-edit\";\nimport {createNewNote} from \"./document-detail-service\";\n\nexport default {\n  \"name\": \"DocumentDetailNotes\",\n  \"components\": {\n    \"app-item\": NoteItemEdit,\n  },\n  \"props\": {\n    \"documentIri\": {\"type\": String, \"required\": true},\n    \"value\": {\"type\": Array, \"required\": true},\n  },\n  \"methods\": {\n    \"onChange\": function (index, value) {\n      this.$emit(\"input\", [\n        ...this.value.slice(0, index),\n        value,\n        ...this.value.slice(index + 1),\n      ]);\n    },\n    \"onInsert\": function (index) {\n      this.$emit(\"input\", [\n        ...this.value.slice(0, index + 1),\n        createNewNote(this.iri, this.value),\n        ...this.value.slice(index + 1),\n      ]);\n    },\n    \"onDelete\": function (index) {\n      this.$emit(\"input\", [\n        ...this.value.slice(0, index),\n        ...this.value.slice(index + 1),\n      ]);\n    },\n    \"onAppend\": function () {\n      this.$emit(\"input\", [\n        ...this.value,\n        createNewNote(this.iri, this.value),\n      ]);\n    },\n    \"onEditProperties\": function(owner) {\n      this.$emit(\"edit-properties\", owner);\n    },\n    \"onEditType\": function (owner) {\n      this.$emit(\"edit-type\", owner);\n    },\n  },\n};\n\n</script>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./document-detail-notes.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./document-detail-notes.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./document-detail-notes.vue?vue&type=template&id=796b1c96&\"\nimport script from \"./document-detail-notes.vue?vue&type=script&lang=js&\"\nexport * from \"./document-detail-notes.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/knoma/knoma/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('796b1c96')) {\n      api.createRecord('796b1c96', component.options)\n    } else {\n      api.reload('796b1c96', component.options)\n    }\n    module.hot.accept(\"./document-detail-notes.vue?vue&type=template&id=796b1c96&\", function () {\n      api.rerender('796b1c96', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"client/document-detail/document-detail-notes.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"v-dialog\",\n    {\n      attrs: {\n        value: _vm.visible,\n        fullscreen: \"\",\n        \"hide-overlay\": \"\",\n        transition: \"dialog-bottom-transition\"\n      },\n      on: {\n        keydown: function($event) {\n          if (\n            !$event.type.indexOf(\"key\") &&\n            _vm._k($event.keyCode, \"esc\", 27, $event.key, [\"Esc\", \"Escape\"])\n          ) {\n            return null\n          }\n          return _vm.onClose($event)\n        }\n      }\n    },\n    [\n      _c(\n        \"v-card\",\n        [\n          _c(\n            \"v-toolbar\",\n            { attrs: { dark: \"\", color: \"primary\" } },\n            [\n              _c(\n                \"v-btn\",\n                { attrs: { icon: \"\" }, on: { click: _vm.onSave } },\n                [_c(\"v-icon\", [_vm._v(\"mdi-check\")])],\n                1\n              ),\n              _vm._v(\" \"),\n              _c(\"v-toolbar-title\", [_vm._v(\"Edit Properties\")]),\n              _vm._v(\" \"),\n              _c(\"v-spacer\"),\n              _vm._v(\" \"),\n              _c(\n                \"v-toolbar-items\",\n                [\n                  _c(\n                    \"v-btn\",\n                    { attrs: { icon: \"\" }, on: { click: _vm.onClose } },\n                    [_c(\"v-icon\", [_vm._v(\"mdi-close\")])],\n                    1\n                  )\n                ],\n                1\n              )\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"v-list\",\n            [\n              _vm._l(Object.entries(_vm.value), function(entry) {\n                return _c(\n                  \"v-list-item\",\n                  { key: entry[0] },\n                  [\n                    _c(\n                      \"v-list-item-title\",\n                      [\n                        _c(\"app-property-edit\", {\n                          attrs: { predicate: entry[0], value: entry[1] },\n                          on: {\n                            input: function(v) {\n                              return _vm.onChange(entry[0], v)\n                            },\n                            delete: function($event) {\n                              return _vm.onDelete(entry[0])\n                            }\n                          }\n                        })\n                      ],\n                      1\n                    )\n                  ],\n                  1\n                )\n              }),\n              _vm._v(\" \"),\n              _c(\n                \"v-list-item\",\n                [\n                  _c(\"app-property-selector\", {\n                    attrs: { label: \"Add new predicate\", types: _vm.types },\n                    on: { add: _vm.onAdd }\n                  })\n                ],\n                1\n              )\n            ],\n            2\n          )\n        ],\n        1\n      )\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"v-list\",\n    [\n      _c(\"v-subheader\", [\n        _c(\n          \"button\",\n          { on: { click: _vm.onDelete } },\n          [\n            _c(\"v-icon\", { attrs: { color: \"red\" } }, [\n              _vm._v(\"\\n        mdi-minus\\n      \")\n            ])\n          ],\n          1\n        ),\n        _vm._v(\"\\n    \" + _vm._s(_vm.definition.label) + \"\\n  \")\n      ]),\n      _vm._v(\" \"),\n      _vm._l(_vm.value, function(content, index) {\n        return _c(\n          \"v-list-item\",\n          { key: index },\n          [\n            _vm.definition.multiple\n              ? _c(\n                  \"button\",\n                  {\n                    on: {\n                      click: function($event) {\n                        return _vm.onAddValue(index)\n                      }\n                    }\n                  },\n                  [_c(\"v-icon\", [_vm._v(\"\\n        mdi-plus\\n      \")])],\n                  1\n                )\n              : _vm._e(),\n            _vm._v(\" \"),\n            _vm.definition.multiple\n              ? _c(\n                  \"button\",\n                  {\n                    on: {\n                      click: function($event) {\n                        return _vm.onDeleteValue(index)\n                      }\n                    }\n                  },\n                  [_c(\"v-icon\", [_vm._v(\"\\n        mdi-minus\\n      \")])],\n                  1\n                )\n              : _vm._e(),\n            _vm._v(\" \"),\n            _vm.definition.type === \"string\"\n              ? _c(\"v-text-field\", {\n                  attrs: { value: content },\n                  on: {\n                    input: function(v) {\n                      return _vm.onUpdateValue(index, v)\n                    }\n                  }\n                })\n              : _vm.definition.type === \"date\"\n              ? _c(\"app-date-picker\", {\n                  attrs: { value: content },\n                  on: {\n                    input: function(v) {\n                      return _vm.onUpdateValue(index, v)\n                    }\n                  }\n                })\n              : _vm.definition.type === \"codelist\"\n              ? _c(\"v-select\", {\n                  attrs: {\n                    value: content,\n                    items: _vm.items,\n                    \"item-text\": \"title\",\n                    \"item-value\": \"iri\"\n                  },\n                  on: {\n                    input: function(v) {\n                      return _vm.onUpdateValue(index, v)\n                    }\n                  }\n                })\n              : _vm._e()\n          ],\n          1\n        )\n      }),\n      _vm._v(\" \"),\n      _vm.value.length === 0\n        ? _c(\"v-list-item\", [\n            _c(\n              \"button\",\n              {\n                on: {\n                  click: function($event) {\n                    return _vm.onAddValue()\n                  }\n                }\n              },\n              [_c(\"v-icon\", [_vm._v(\"\\n        mdi-plus\\n      \")])],\n              1\n            )\n          ])\n        : _vm._e()\n    ],\n    2\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"v-menu\",\n    {\n      ref: \"menu\",\n      attrs: {\n        \"close-on-content-click\": false,\n        transition: \"scale-transition\",\n        \"offset-y\": \"\",\n        \"min-width\": \"auto\"\n      },\n      scopedSlots: _vm._u([\n        {\n          key: \"activator\",\n          fn: function(ref) {\n            var on = ref.on\n            var attrs = ref.attrs\n            return [\n              _c(\n                \"v-text-field\",\n                _vm._g(\n                  _vm._b(\n                    {\n                      attrs: {\n                        value: _vm.value,\n                        \"prepend-icon\": \"mdi-calendar\",\n                        readonly: \"\"\n                      }\n                    },\n                    \"v-text-field\",\n                    attrs,\n                    false\n                  ),\n                  on\n                )\n              )\n            ]\n          }\n        }\n      ]),\n      model: {\n        value: _vm.visible,\n        callback: function($$v) {\n          _vm.visible = $$v\n        },\n        expression: \"visible\"\n      }\n    },\n    [\n      _vm._v(\" \"),\n      _c(\"v-date-picker\", {\n        ref: \"picker\",\n        attrs: { value: _vm.value },\n        on: { change: _vm.onChange }\n      })\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\n  <v-menu\n    ref=\"menu\"\n    v-model=\"visible\"\n    :close-on-content-click=\"false\"\n    transition=\"scale-transition\"\n    offset-y\n    min-width=\"auto\"\n  >\n    <template #activator=\"{ on, attrs }\">\n      <v-text-field\n        :value=\"value\"\n        prepend-icon=\"mdi-calendar\"\n        readonly\n        v-bind=\"attrs\"\n        v-on=\"on\"\n      />\n    </template>\n    <v-date-picker\n      ref=\"picker\"\n      :value=\"value\"\n      @change=\"onChange\"\n    />\n  </v-menu>\n</template>\n\n<script>\nexport default {\n  \"name\": \"DatePicker\",\n  \"props\": {\n    \"value\": {\"type\": String, \"required\": true},\n  },\n  \"data\": () => ({\n    \"visible\": false,\n  }),\n  \"watch\": {\n    \"visible\": function (value) {\n      // Start with year every time.\n      value && setTimeout(() => (this.$refs.picker.activePicker = \"YEAR\"));\n    },\n  },\n  \"methods\": {\n    \"onChange\": function (value) {\n      this.$refs.menu.save(value);\n      this.$emit(\"input\", value);\n    },\n  },\n};\n</script>","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./date-picker.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./date-picker.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./date-picker.vue?vue&type=template&id=6546038c&\"\nimport script from \"./date-picker.vue?vue&type=script&lang=js&\"\nexport * from \"./date-picker.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/knoma/knoma/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('6546038c')) {\n      api.createRecord('6546038c', component.options)\n    } else {\n      api.reload('6546038c', component.options)\n    }\n    module.hot.accept(\"./date-picker.vue?vue&type=template&id=6546038c&\", function () {\n      api.rerender('6546038c', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"client/components/date-picker.vue\"\nexport default component.exports","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./properties-dialog-item.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./properties-dialog-item.vue?vue&type=script&lang=js&\"","<template>\n  <v-list>\n    <v-subheader>\n      <button @click=\"onDelete\">\n        <v-icon color=\"red\">\n          mdi-minus\n        </v-icon>\n      </button>\n      {{ definition.label }}\n    </v-subheader>\n    <v-list-item\n      v-for=\"(content, index) in value\"\n      :key=\"index\"\n    >\n      <button\n        v-if=\"definition.multiple\"\n        @click=\"onAddValue(index)\"\n      >\n        <v-icon>\n          mdi-plus\n        </v-icon>\n      </button>\n      <button\n        v-if=\"definition.multiple\"\n        @click=\"onDeleteValue(index)\"\n      >\n        <v-icon>\n          mdi-minus\n        </v-icon>\n      </button>\n      <v-text-field\n        v-if=\"definition.type === 'string'\"\n        :value=\"content\"\n        @input=\"(v) => onUpdateValue(index, v)\"\n      />\n      <app-date-picker\n        v-else-if=\"definition.type === 'date'\"\n        :value=\"content\"\n        @input=\"(v) => onUpdateValue(index, v)\"\n      />\n      <v-select\n        v-else-if=\"definition.type === 'codelist'\"\n        :value=\"content\"\n        :items=\"items\"\n        item-text=\"title\"\n        item-value=\"iri\"\n        @input=\"(v) => onUpdateValue(index, v)\"\n      />\n    </v-list-item>\n    <v-list-item v-if=\"value.length === 0\">\n      <button @click=\"onAddValue()\">\n        <v-icon>\n          mdi-plus\n        </v-icon>\n      </button>\n    </v-list-item>\n  </v-list>\n</template>\n\n<script>\nimport {getDatabase} from \"../database\";\nimport DatePicker from \"./date-picker\";\n\nexport default {\n  \"name\": \"PropertiesDialogItem\",\n  \"components\": {\n    \"app-date-picker\": DatePicker,\n  },\n  \"props\": {\n    \"predicate\": {\"type\": String, \"required\": true},\n    \"value\": {\"type\": Array, \"required\": true},\n  },\n  \"data\": () => ({\n    \"definition\": {},\n    \"loading\": false,\n    \"items\": [],\n  }),\n  \"mounted\": async function () {\n    const database = getDatabase();\n    this.loading = true;\n    this.definition = (await database.getPredicate(this.predicate)) || {};\n    if (this.definition.type === \"codelist\") {\n      const iris = await database.getCodelist(this.definition.codelist);\n      const items = [];\n      for (const iri of iris) {\n        items.push({\n          \"iri\": iri,\n          \"title\": await database.getLabel(iri),\n        });\n      }\n      this.items = items;\n    }\n    this.loading = false;\n  },\n  \"methods\": {\n    \"onDelete\": function () {\n      this.$emit(\"delete\");\n    },\n    \"onAddValue\": function (index) {\n      this.$emit(\"input\", [\n        ...this.value.slice(0, index + 1),\n        \"\",\n        ...this.value.slice(index + 1),\n      ]);\n    },\n    \"onDeleteValue\": function (index) {\n      this.$emit(\"input\", [\n        ...this.value.slice(0, index),\n        ...this.value.slice(index + 1),\n      ]);\n    },\n    \"onUpdateValue\": function (index, value) {\n      this.$emit(\"input\", [\n        ...this.value.slice(0, index),\n        value,\n        ...this.value.slice(index + 1),\n      ]);\n    },\n  },\n};\n</script>\n","import { render, staticRenderFns } from \"./properties-dialog-item.vue?vue&type=template&id=2f69f4c1&\"\nimport script from \"./properties-dialog-item.vue?vue&type=script&lang=js&\"\nexport * from \"./properties-dialog-item.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/knoma/knoma/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('2f69f4c1')) {\n      api.createRecord('2f69f4c1', component.options)\n    } else {\n      api.reload('2f69f4c1', component.options)\n    }\n    module.hot.accept(\"./properties-dialog-item.vue?vue&type=template&id=2f69f4c1&\", function () {\n      api.rerender('2f69f4c1', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"client/components/properties-dialog-item.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"v-combobox\", {\n    staticClass: \"pr-2\",\n    attrs: {\n      loading: _vm.loading,\n      disabled: _vm.loading,\n      items: _vm.filteredItems,\n      \"auto-select-first\": true,\n      \"item-value\": \"iri\",\n      \"item-text\": \"label\",\n      label: _vm.label,\n      autofocus: \"\"\n    },\n    model: {\n      value: _vm.value,\n      callback: function($$v) {\n        _vm.value = $$v\n      },\n      expression: \"value\"\n    }\n  })\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./property-selector.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./property-selector.vue?vue&type=script&lang=js&\"","<template>\n  <v-combobox\n    v-model=\"value\"\n    :loading=\"loading\"\n    :disabled=\"loading\"\n    :items=\"filteredItems\"\n    :auto-select-first=\"true\"\n    class=\"pr-2\"\n    item-value=\"iri\"\n    item-text=\"label\"\n    :label=\"label\"\n    autofocus\n  />\n</template>\n\n<script>\nimport Vue from \"vue\";\n\nimport {getDatabase} from \"../database\";\n\nexport default {\n  \"name\": \"PropertySelector\",\n  \"props\": {\n    \"label\": {\"type\": String, \"required\": true},\n    \"types\": {\"type\": Array, \"required\": false, \"default\": undefined},\n  },\n  \"data\": () => ({\n    \"value\": \"\",\n    \"loading\": false,\n    \"items\": [],\n    \"filteredItems\": [],\n    \"search\": null,\n  }),\n  \"watch\": {\n    \"value\": function (value) {\n      if (value === \"\") {\n        return;\n      }\n      // Reset to nothing selected.\n      Vue.nextTick(() => {\n        this.value = \"\";\n      });\n      this.$emit(\"add\", value);\n    },\n    \"types\": function (value) {\n      this.filterItems(value);\n    },\n  },\n  \"mounted\": async function () {\n    this.loading = true;\n    this.items = await getDatabase().getPredicates();\n    this.filterItems(this.types);\n    this.loading = false;\n  },\n  \"methods\": {\n    \"filterItems\": function (types) {\n      this.filteredItems = this.items\n        .filter(item => shouldBeUsed(item.domain, types));\n    },\n  },\n};\n\nfunction shouldBeUsed(domain, currentTypes) {\n  if (domain === undefined || domain.length === 0) {\n    return true;\n  }\n  if (currentTypes === undefined) {\n    return false;\n  }\n  for (const typeObject of currentTypes) {\n    if (domain.includes(typeObject)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n</script>\n","import { render, staticRenderFns } from \"./property-selector.vue?vue&type=template&id=5dff0a78&\"\nimport script from \"./property-selector.vue?vue&type=script&lang=js&\"\nexport * from \"./property-selector.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/knoma/knoma/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('5dff0a78')) {\n      api.createRecord('5dff0a78', component.options)\n    } else {\n      api.reload('5dff0a78', component.options)\n    }\n    module.hot.accept(\"./property-selector.vue?vue&type=template&id=5dff0a78&\", function () {\n      api.rerender('5dff0a78', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"client/components/property-selector.vue\"\nexport default component.exports","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./properties-dialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./properties-dialog.vue?vue&type=script&lang=js&\"","<template>\n  <v-dialog\n    :value=\"visible\"\n    fullscreen\n    hide-overlay\n    transition=\"dialog-bottom-transition\"\n    @keydown.esc=\"onClose\"\n  >\n    <v-card>\n      <v-toolbar\n        dark\n        color=\"primary\"\n      >\n        <v-btn\n          icon\n          @click=\"onSave\"\n        >\n          <v-icon>mdi-check</v-icon>\n        </v-btn>\n        <v-toolbar-title>Edit Properties</v-toolbar-title>\n        <v-spacer />\n        <v-toolbar-items>\n          <v-btn\n            icon\n            @click=\"onClose\"\n          >\n            <v-icon>mdi-close</v-icon>\n          </v-btn>\n        </v-toolbar-items>\n      </v-toolbar>\n      <v-list>\n        <v-list-item\n          v-for=\"entry in Object.entries(value)\"\n          :key=\"entry[0]\"\n        >\n          <v-list-item-title>\n            <app-property-edit\n              :predicate=\"entry[0]\"\n              :value=\"entry[1]\"\n              @input=\"(v) => onChange(entry[0], v)\"\n              @delete=\"onDelete(entry[0])\"\n            />\n          </v-list-item-title>\n        </v-list-item>\n        <v-list-item>\n          <app-property-selector\n            label=\"Add new predicate\"\n            :types=\"types\"\n            @add=\"onAdd\"\n          />\n        </v-list-item>\n      </v-list>\n    </v-card>\n  </v-dialog>\n</template>\n\n<script>\nimport PropertyEdit from \"./properties-dialog-item\";\nimport PropertySelector from \"../components/property-selector\";\n\nexport default {\n  \"name\": \"PropertiesDialog\",\n  \"components\": {\n    \"app-property-edit\": PropertyEdit,\n    \"app-property-selector\": PropertySelector,\n  },\n  \"props\": {\n    \"value\": {\"type\": Object, \"required\": true},\n    \"visible\": {\"type\": Boolean, \"required\": true},\n    \"types\": {\"type\": Array, \"required\": true},\n  },\n  \"methods\": {\n    \"onChange\": function (key, value) {\n      this.$emit(\"input\", {\n        ...this.value,\n        [key]: value,\n      });\n    },\n    \"onDelete\": function (key) {\n      const newValue = {...this.value};\n      delete newValue[key];\n      this.$emit(\"input\", newValue);\n    },\n    \"onAdd\": function (predicate) {\n      if (this.value[predicate.iri] !== undefined) {\n        return;\n      }\n      this.$emit(\"input\", {\n        ...this.value,\n        [predicate.iri]: [\"\"],\n      });\n    },\n    \"onSave\": function() {\n      this.$emit(\"save\");\n    },\n    \"onClose\": function() {\n      this.$emit(\"close\");\n    },\n  },\n};\n</script>\n","import { render, staticRenderFns } from \"./properties-dialog.vue?vue&type=template&id=f605a0e2&\"\nimport script from \"./properties-dialog.vue?vue&type=script&lang=js&\"\nexport * from \"./properties-dialog.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/knoma/knoma/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('f605a0e2')) {\n      api.createRecord('f605a0e2', component.options)\n    } else {\n      api.reload('f605a0e2', component.options)\n    }\n    module.hot.accept(\"./properties-dialog.vue?vue&type=template&id=f605a0e2&\", function () {\n      api.rerender('f605a0e2', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"client/components/properties-dialog.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"v-dialog\",\n    {\n      attrs: { value: _vm.visible, persistent: \"\" },\n      on: {\n        keydown: function($event) {\n          if (\n            !$event.type.indexOf(\"key\") &&\n            _vm._k($event.keyCode, \"esc\", 27, $event.key, [\"Esc\", \"Escape\"])\n          ) {\n            return null\n          }\n          return _vm.onClose($event)\n        }\n      }\n    },\n    [\n      _c(\n        \"v-card\",\n        [\n          _c(\"v-card-title\", { staticClass: \"headline\" }, [\n            _vm._v(\"\\n      Type\\n    \")\n          ]),\n          _vm._v(\" \"),\n          _c(\n            \"v-card-text\",\n            { staticClass: \"mt-4\" },\n            [\n              _c(\"v-select\", {\n                attrs: {\n                  value: _vm.value,\n                  items: _vm.items,\n                  \"item-text\": \"title\",\n                  \"item-value\": \"iri\",\n                  label: \"Type\",\n                  multiple: _vm.multiple,\n                  chips: \"\"\n                },\n                on: { input: _vm.onChange }\n              })\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\"v-divider\"),\n          _vm._v(\" \"),\n          _c(\n            \"v-card-actions\",\n            [\n              _c(\n                \"v-btn\",\n                {\n                  attrs: { color: \"primary\", text: \"\" },\n                  on: { click: _vm.onSave }\n                },\n                [_vm._v(\"\\n        Save\\n      \")]\n              ),\n              _vm._v(\" \"),\n              _c(\"v-btn\", { attrs: { text: \"\" }, on: { click: _vm.onClose } }, [\n                _vm._v(\"\\n        Close\\n      \")\n              ])\n            ],\n            1\n          )\n        ],\n        1\n      )\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\n  <v-dialog\n    :value=\"visible\"\n    persistent\n    @keydown.esc=\"onClose\"\n  >\n    <v-card>\n      <v-card-title class=\"headline\">\n        Type\n      </v-card-title>\n      <v-card-text class=\"mt-4\">\n        <v-select\n          :value=\"value\"\n          :items=\"items\"\n          item-text=\"title\"\n          item-value=\"iri\"\n          label=\"Type\"\n          :multiple=\"multiple\"\n          chips\n          @input=\"onChange\"\n        />\n      </v-card-text>\n      <v-divider />\n      <v-card-actions>\n        <v-btn\n          color=\"primary\"\n          text\n          @click=\"onSave\"\n        >\n          Save\n        </v-btn>\n        <v-btn\n          text\n          @click=\"onClose\"\n        >\n          Close\n        </v-btn>\n      </v-card-actions>\n    </v-card>\n  </v-dialog>\n</template>\n\n<script>\nimport {getDatabase} from \"../database\";\n\nexport default {\n  \"name\": \"CodelistDialog\",\n  \"props\": {\n    \"value\": {\"type\": Array, \"required\": true},\n    \"codelist\": {\"type\": Array, \"required\": true},\n    \"visible\": {\"type\": Boolean, \"required\": true},\n    \"multiple\": {\"type\": Boolean, \"default\": true},\n    \"refreshOnShow\": {\"type\": Boolean, \"default\": false},\n  },\n  \"data\": () => ({\n    \"items\": [],\n    \"loading\": false,\n  }),\n  \"watch\": {\n    \"visible\": async function () {\n      if (this.refreshOnShow) {\n        await this.refresh();\n      }\n    },\n  },\n  \"mounted\": async function() {\n    await this.refresh();\n  },\n  \"methods\": {\n    \"refresh\": async function() {\n      const database = getDatabase();\n      this.loading = true;\n      const iris = await database.getCodelist(this.codelist);\n      const tags = [];\n      for (const iri of iris) {\n        tags.push({\n          \"iri\": iri,\n          \"title\": await database.getLabel(iri),\n        });\n      }\n      this.items = tags;\n      this.loading = false;\n    },\n    \"onChange\": function (value) {\n      this.$emit(\"input\", value);\n    },\n    \"onClose\": function () {\n      this.$emit(\"close\");\n    },\n    \"onSave\": function () {\n      this.$emit(\"save\", this.value);\n    },\n  },\n};\n</script>\n\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./codelist-dialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./codelist-dialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./codelist-dialog.vue?vue&type=template&id=73add212&\"\nimport script from \"./codelist-dialog.vue?vue&type=script&lang=js&\"\nexport * from \"./codelist-dialog.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/knoma/knoma/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('73add212')) {\n      api.createRecord('73add212', component.options)\n    } else {\n      api.reload('73add212', component.options)\n    }\n    module.hot.accept(\"./codelist-dialog.vue?vue&type=template&id=73add212&\", function () {\n      api.rerender('73add212', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"client/components/codelist-dialog.vue\"\nexport default component.exports","<template>\n  <v-container>\n    <app-header\n      v-model=\"document\"\n      @edit-properties=\"onOpenPropertiesDialog\"\n      @edit-type=\"onOpenNoteTypeDialog\"\n      @save=\"onSave\"\n      @close=\"onClose\"\n    />\n    <app-items\n      v-model=\"document.items\"\n      :document-iri=\"document.iri\"\n      @edit-properties=\"onOpenPropertiesDialog\"\n      @edit-type=\"onOpenNoteTypeDialog\"\n    />\n    <app-property-dialog\n      v-model=\"propertyDialog.data\"\n      :visible=\"propertyDialog.open\"\n      :types=\"propertyDialog.types\"\n      @save=\"onSavePropertiesDialog\"\n      @close=\"onClosePropertiesDialog\"\n    />\n    <app-codelist-dialog\n      v-model=\"typeDialog.data\"\n      :visible=\"typeDialog.open\"\n      :codelist=\"['http://www.w3.org/2000/01/rdf-schema#Class']\"\n      @save=\"onSaveNoteTypeDialog\"\n      @close=\"onCloseNoteTypeDialog\"\n    />\n    <v-layout class=\"mt-6\">\n      <v-btn\n        class=\"mr-4\"\n        @click=\"onSave\"\n      >\n        Save\n      </v-btn>\n      <v-btn @click=\"onClose\">\n        Close\n      </v-btn>\n    </v-layout>\n  </v-container>\n</template>\n\n<script>\nimport Vue from \"vue\";\nimport Header from \"./document-detail-header\";\nimport Items from \"./document-detail-notes\";\nimport PropertyDialog from \"../components/properties-dialog\";\nimport CodelistDialog from \"../components/codelist-dialog\";\nimport {createDocument, getDatabase} from \"../database\";\nimport {\n  createNewNote,\n  focusNextNote,\n  focusPreviousNote,\n  getTextAreas,\n} from \"./document-detail-service\";\nimport {NOTE} from \"../database/predefined\";\n\nexport default {\n  \"name\": \"DocumentDetail\",\n  \"components\": {\n    \"app-header\": Header,\n    \"app-items\": Items,\n    \"app-property-dialog\": PropertyDialog,\n    \"app-codelist-dialog\": CodelistDialog,\n  },\n  \"data\": () => ({\n    \"document\": createDocument(),\n    \"loading\": false,\n    \"propertyDialog\": {\n      \"open\": false,\n      \"owner\": undefined,\n      \"types\": [],\n      \"data\": {},\n    },\n    \"typeDialog\": {\n      \"open\": false,\n      \"owner\": undefined,\n      \"data\": [],\n    },\n  }),\n  \"mounted\": async function () {\n    window.document.addEventListener(\"keydown\", this.onKeyDown);\n    const iri = this.$route.query.document;\n    if (iri === undefined) {\n      return;\n    }\n    this.loading = true;\n    const document = await getDatabase().getDocument(iri);\n    if (document !== undefined) {\n      this.document = document;\n    }\n    this.loading = false;\n  },\n  \"destroyed\": function () {\n    window.document.removeEventListener(\"keydown\", this.onKeyDown);\n  },\n  \"methods\": {\n    \"onKeyDown\": function (event) {\n      if (event.ctrlKey && event.key === \"s\") {\n        this.onSave();\n        event.preventDefault();\n      } else if (event.altKey && event.key === \"a\") {\n        this.document.items = [\n          ...this.document.items,\n          createNewNote(this.document.iri, this.document.items),\n        ];\n        Vue.nextTick(() => {\n          getTextAreas().pop().focus();\n        });\n        event.preventDefault();\n      } else if (event.altKey && event.key === \"ArrowUp\") {\n        focusPreviousNote();\n        event.preventDefault();\n      } else if (event.altKey && event.key === \"ArrowDown\") {\n        focusNextNote();\n        event.preventDefault();\n      }\n    },\n    \"onOpenPropertiesDialog\": function (owner) {\n      this.propertyDialog = {\n        \"open\": true,\n        \"owner\": owner,\n        // The note has no types, se we substitute with note type here.\n        \"types\": owner?.types ?? [NOTE],\n        \"data\": cloneProperties(owner.properties),\n      };\n    },\n    \"onClosePropertiesDialog\": function () {\n      this.propertyDialog.open = false;\n    },\n    \"onSavePropertiesDialog\": function () {\n      this.propertyDialog.owner.properties = this.propertyDialog.data;\n      this.propertyDialog.open = false;\n    },\n    \"onOpenNoteTypeDialog\": function (owner) {\n      this.typeDialog = {\n        \"open\": true,\n        \"owner\": owner,\n        \"data\": owner.types,\n      };\n    },\n    \"onSaveNoteTypeDialog\": function () {\n      this.typeDialog.owner.types = this.typeDialog.data;\n      this.typeDialog.open = false;\n    },\n    \"onCloseNoteTypeDialog\": function () {\n      this.typeDialog.open = false;\n    },\n    \"onSave\": async function () {\n      this.loading = true;\n      try {\n        await getDatabase().storeDocument(this.document);\n        this.$notify({\n          \"title\": \"Document saved.\",\n          \"type\": \"success\",\n        });\n      } catch (ex) {\n        this.$notify({\n          \"title\": \"Can't save data.\",\n          \"type\": \"error\",\n        });\n        throw ex;\n      }\n      this.loading = false;\n    },\n    \"onClose\": function () {\n      this.$router.push({\n        \"name\": \"documents\",\n      });\n    },\n  },\n};\n\nfunction cloneProperties(source) {\n  const result = {};\n  for (const [key, value] of Object.entries(source)) {\n    if (Array.isArray(value)) {\n      result[key] = [...value];\n    } else if (typeof value === \"object\") {\n      result[key] = {...value};\n    } else {\n      result[key] = value;\n    }\n  }\n  return result;\n}\n\n</script>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./document-detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./document-detail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./document-detail.vue?vue&type=template&id=2024687e&\"\nimport script from \"./document-detail.vue?vue&type=script&lang=js&\"\nexport * from \"./document-detail.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/knoma/knoma/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('2024687e')) {\n      api.createRecord('2024687e', component.options)\n    } else {\n      api.reload('2024687e', component.options)\n    }\n    module.hot.accept(\"./document-detail.vue?vue&type=template&id=2024687e&\", function () {\n      api.rerender('2024687e', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"client/document-detail/document-detail.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"v-container\",\n    [\n      _c(\"app-filter\", {\n        on: { change: _vm.reload },\n        model: {\n          value: _vm.source.filters,\n          callback: function($$v) {\n            _vm.$set(_vm.source, \"filters\", $$v)\n          },\n          expression: \"source.filters\"\n        }\n      }),\n      _vm._v(\" \"),\n      _c(\n        \"v-list\",\n        { staticClass: \"item-list\" },\n        [\n          _vm._l(_vm.source.visibleDocuments, function(item) {\n            return _c(\"app-item\", {\n              key: item.iri,\n              attrs: { value: item },\n              on: { open: _vm.onOpen, delete: _vm.onDelete }\n            })\n          }),\n          _vm._v(\" \"),\n          _c(\"v-divider\"),\n          _vm._v(\" \"),\n          _c(\n            \"v-list-item\",\n            [\n              _vm.source.visibleLimit < _vm.source.documents.length\n                ? _c(\n                    \"v-list-item-content\",\n                    [\n                      _c(\"div\", [\n                        _vm._v(\n                          \"\\n          Showing \" +\n                            _vm._s(_vm.source.visibleLimit) +\n                            \"\\n          out of \" +\n                            _vm._s(_vm.source.documents.length) +\n                            \"\\n          documents.\\n        \"\n                        )\n                      ]),\n                      _vm._v(\" \"),\n                      _c(\n                        \"v-btn\",\n                        { staticClass: \"mt-2\", on: { click: _vm.onShowMore } },\n                        [_vm._v(\"\\n          Show more\\n        \")]\n                      )\n                    ],\n                    1\n                  )\n                : _c(\"v-list-item-content\", [\n                    _vm._v(\n                      \"\\n        All of \" +\n                        _vm._s(_vm.source.documents.length) +\n                        \" documents are visible.\\n      \"\n                    )\n                  ])\n            ],\n            1\n          )\n        ],\n        2\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"div\",\n        { staticClass: \"floating-menu\" },\n        [\n          _c(\n            \"v-btn\",\n            {\n              staticClass: \"bottom\",\n              attrs: { color: \"green darken-2\", fab: \"\", dark: \"\" },\n              on: { click: _vm.onCreate }\n            },\n            [_c(\"v-icon\", [_vm._v(\"mdi-plus\")])],\n            1\n          )\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"v-overlay\",\n        { attrs: { value: _vm.loading } },\n        [\n          _c(\"v-progress-circular\", {\n            attrs: { size: 50, color: \"primary\", indeterminate: \"\" }\n          })\n        ],\n        1\n      )\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"v-list-item\",\n    { on: { click: _vm.onOpen } },\n    [\n      _c(\"v-list-item-title\", [\n        _vm._v(\"\\n    \" + _vm._s(_vm.value.title || _vm.value.iri) + \"\\n  \")\n      ]),\n      _vm._v(\" \"),\n      _c(\n        \"v-list-item-subtitle\",\n        [\n          _c(\"app-tags\", { attrs: { value: _vm.value.types, small: \"\" } }),\n          _vm._v(\" \"),\n          _vm._l(_vm.tags, function(tag, index) {\n            return _c(\n              \"v-chip\",\n              {\n                key: index,\n                staticClass: \"mr-2\",\n                attrs: { small: true, color: tag.color }\n              },\n              [_vm._v(\"\\n      \" + _vm._s(tag.label) + \"\\n    \")]\n            )\n          })\n        ],\n        2\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"v-list-item-action\",\n        [\n          _c(\n            \"v-btn\",\n            {\n              attrs: { icon: \"\", color: \"red\" },\n              on: {\n                click: function($event) {\n                  $event.stopPropagation()\n                  return _vm.onDelete($event)\n                }\n              }\n            },\n            [_c(\"v-icon\", [_vm._v(\"\\n        mdi-delete\\n      \")])],\n            1\n          )\n        ],\n        1\n      )\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\n  <v-list-item @click=\"onOpen\">\n    <v-list-item-title>\n      {{ value.title || value.iri }}\n    </v-list-item-title>\n    <v-list-item-subtitle>\n      <app-tags\n        :value=\"value.types\"\n        small\n      />\n      <v-chip\n        v-for=\"(tag, index) in tags\"\n        :key=\"index\"\n        :small=\"true\"\n        :color=\"tag.color\"\n        class=\"mr-2\"\n      >\n        {{ tag.label }}\n      </v-chip>\n    </v-list-item-subtitle>\n    <v-list-item-action>\n      <v-btn\n        icon\n        color=\"red\"\n        @click.stop=\"onDelete\"\n      >\n        <v-icon>\n          mdi-delete\n        </v-icon>\n      </v-btn>\n    </v-list-item-action>\n  </v-list-item>\n</template>\n\n<script>\nimport TagLine from \"../components/tag-line\";\nimport {buildDocumentTagList} from \"./document-list-service\";\n\nexport default {\n  \"name\": \"DocumentListItem\",\n  \"components\": {\n    \"app-tags\": TagLine,\n  },\n  \"props\": {\n    \"value\": {\"type\": Object, \"required\": true},\n  },\n  \"data\": () => ({\n    \"tags\": [],\n  }),\n  \"mounted\": async function () {\n    await this.refresh();\n  },\n  \"methods\": {\n    \"onOpen\": function (event) {\n      this.$emit(\"open\", {\n        \"iri\": this.value.iri,\n        \"ctrlKey\": event.ctrlKey,\n      });\n    },\n    \"onDelete\": function () {\n      this.$emit(\"delete\", this.value.iri);\n    },\n    \"refresh\": async function () {\n      this.tags = await buildDocumentTagList(this.value);\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./document-list-item.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./document-list-item.vue?vue&type=script&lang=js&\"","import {Document, getDatabase, PredicateEditType} from \"../database\";\n\nexport type TagWithColour = {\n  label: string;\n  color: string;\n  priority: number;\n}\n\nexport async function buildDocumentTagList(\n  document: Document,\n): Promise<TagWithColour[]> {\n  const database = getDatabase();\n  const result: TagWithColour[] = [];\n  for (const iri of Object.keys(document.properties).sort()) {\n    const predicate = await database.getPredicate(iri);\n    if (predicate === undefined) {\n      continue;\n    }\n    const color = predicate.listColour;\n    if (color === undefined) {\n      continue;\n    }\n    const priority: number = predicate.listPriority ?? 0;\n    if (predicate.type === PredicateEditType.Codelist) {\n      for (const value of document.properties[iri]) {\n        const label = await database.getLabel(value);\n        result.push({\n          \"label\": label,\n          \"color\": color,\n          \"priority\": priority,\n        });\n      }\n    } else {\n      for (const label of document.properties[iri]) {\n        result.push({\n          \"label\": label,\n          \"color\": color,\n          \"priority\": priority,\n        });\n      }\n    }\n  }\n  result.sort((left, right) => right.priority - left.priority);\n  return result;\n}\n","import { render, staticRenderFns } from \"./document-list-item.vue?vue&type=template&id=4c9ee835&\"\nimport script from \"./document-list-item.vue?vue&type=script&lang=js&\"\nexport * from \"./document-list-item.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/knoma/knoma/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('4c9ee835')) {\n      api.createRecord('4c9ee835', component.options)\n    } else {\n      api.reload('4c9ee835', component.options)\n    }\n    module.hot.accept(\"./document-list-item.vue?vue&type=template&id=4c9ee835&\", function () {\n      api.rerender('4c9ee835', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"client/document-list/document-list-item.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"v-container\",\n    [\n      _c(\"v-text-field\", {\n        attrs: { label: \"Text search\", value: _vm.value.search },\n        on: { input: _vm.onSearchInput, change: _vm.onChange }\n      }),\n      _vm._v(\" \"),\n      _c(\"app-type-filter\", {\n        attrs: { value: _vm.value },\n        on: { input: _vm.onInput, change: _vm.onChange }\n      }),\n      _vm._v(\" \"),\n      _c(\"app-property-filter\", {\n        attrs: { value: _vm.value },\n        on: { input: _vm.onInput, change: _vm.onChange }\n      })\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    [\n      _c(\n        \"div\",\n        [\n          _vm._v(\"\\n    Tags:\\n    \"),\n          _c(\n            \"v-btn\",\n            { attrs: { icon: \"\" }, on: { click: _vm.onAddInclude } },\n            [_c(\"v-icon\", [_vm._v(\"\\n        mdi-plus\\n      \")])],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"v-btn\",\n            { attrs: { icon: \"\" }, on: { click: _vm.onAddExclude } },\n            [_c(\"v-icon\", [_vm._v(\"\\n        mdi-minus\\n      \")])],\n            1\n          )\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _vm._l(_vm.tags, function(tag, index) {\n        return _c(\n          \"v-chip\",\n          {\n            key: tag.iri,\n            staticClass: \"mr-2\",\n            attrs: {\n              color: tag.include ? \"green\" : \"red\",\n              small: \"\",\n              close: \"\"\n            },\n            on: {\n              \"click:close\": function($event) {\n                return _vm.onRemoveType(index)\n              }\n            }\n          },\n          [_vm._v(\"\\n    \" + _vm._s(tag.label) + \"\\n  \")]\n        )\n      }),\n      _vm._v(\" \"),\n      _c(\"app-codelist-dialog\", {\n        attrs: {\n          visible: _vm.dialog.visible,\n          codelist: [\"http://www.w3.org/2000/01/rdf-schema#Class\"],\n          multiple: false\n        },\n        on: { save: _vm.onSaveTypeDialog, close: _vm.onCloseTypeDialog },\n        model: {\n          value: _vm.dialog.items,\n          callback: function($$v) {\n            _vm.$set(_vm.dialog, \"items\", $$v)\n          },\n          expression: \"dialog.items\"\n        }\n      })\n    ],\n    2\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div>\n      Tags:\n      <v-btn\n        icon\n        @click=\"onAddInclude\"\n      >\n        <v-icon>\n          mdi-plus\n        </v-icon>\n      </v-btn>\n      <v-btn\n        icon\n        @click=\"onAddExclude\"\n      >\n        <v-icon>\n          mdi-minus\n        </v-icon>\n      </v-btn>\n    </div>\n    <v-chip\n      v-for=\"(tag, index) in tags\"\n      :key=\"tag.iri\"\n      :color=\"tag.include ? 'green' : 'red'\"\n      small\n      close\n      class=\"mr-2\"\n      @click:close=\"onRemoveType(index)\"\n    >\n      {{ tag.label }}\n    </v-chip>\n    <app-codelist-dialog\n      v-model=\"dialog.items\"\n      :visible=\"dialog.visible\"\n      :codelist=\"['http://www.w3.org/2000/01/rdf-schema#Class']\"\n      :multiple=\"false\"\n      @save=\"onSaveTypeDialog\"\n      @close=\"onCloseTypeDialog\"\n    />\n  </div>\n</template>\n\n<script>\nimport CodelistDialog from \"../components/codelist-dialog\";\nimport {getDatabase} from \"../database\";\n\nexport default {\n  \"name\": \"TypeFilter\",\n  \"components\": {\n    \"app-codelist-dialog\": CodelistDialog,\n  },\n  \"props\": {\n    \"value\": {\"type\": Object, \"required\": true},\n  },\n  \"data\": () => ({\n    \"dialog\": {\n      \"items\": [],\n      \"visible\": false,\n      \"include\": true,\n    },\n    \"tags\": [],\n  }),\n  \"watch\": {\n    \"value.types\": function (oldValue, newValue) {\n      if (oldValue === newValue) {\n        return;\n      }\n      this.computeTags();\n    },\n  },\n  \"methods\": {\n    \"onAddInclude\": function () {\n      this.dialog.visible = true;\n      this.dialog.include = true;\n    },\n    \"onAddExclude\": function () {\n      this.dialog.visible = true;\n      this.dialog.include = false;\n    },\n    \"onSaveTypeDialog\": function (iri) {\n      this.dialog.visible = false;\n      this.dialog.items = [];\n      // Check if the element is already in the list.\n      for (const index in this.value.types) {\n        const item = this.value.types[index];\n        if (item.iri !== iri) {\n          continue;\n        }\n        if (item.include === this.dialog.include) {\n          // Item is already stored.\n          return;\n        }\n        // Just update include and cancel.\n        this.$emit(\"input\", {\n          ...this.value,\n          \"types\": [\n            ...this.value.types.slice(0, index),\n            {\n              \"iri\": iri,\n              \"include\": this.dialog.include,\n            },\n            ...this.value.types.slice(index + 1),\n          ],\n        });\n        this.$emit(\"change\");\n        return;\n      }\n      // There is no such element.\n      this.$emit(\"input\", {\n        ...this.value,\n        \"types\": [\n          ...this.value.types,\n          {\n            \"iri\": iri,\n            \"include\": this.dialog.include,\n          },\n        ],\n      });\n      this.$emit(\"change\");\n    },\n    \"computeTags\": async function () {\n      const result = [];\n      const database = getDatabase();\n      for (const item of this.value.types) {\n        result.push({\n          \"iri\": item.iri,\n          \"label\": await database.getLabel(item.iri),\n          \"include\": item.include,\n        });\n      }\n      this.tags = result;\n    },\n    \"onCloseTypeDialog\": function () {\n      this.dialog.visible = false;\n      this.dialog.items = [];\n    },\n    \"onRemoveType\": function(index) {\n      this.$emit(\"input\", {\n        ...this.value,\n        \"types\": [\n          ...this.value.types.slice(0, index),\n          ...this.value.types.slice(index + 1),\n        ],\n      });\n      this.$emit(\"change\");\n    },\n  },\n};\n</script>","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./type-filter.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./type-filter.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./type-filter.vue?vue&type=template&id=32455394&\"\nimport script from \"./type-filter.vue?vue&type=script&lang=js&\"\nexport * from \"./type-filter.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/knoma/knoma/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('32455394')) {\n      api.createRecord('32455394', component.options)\n    } else {\n      api.reload('32455394', component.options)\n    }\n    module.hot.accept(\"./type-filter.vue?vue&type=template&id=32455394&\", function () {\n      api.rerender('32455394', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"client/document-list/type-filter.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    [\n      _c(\n        \"div\",\n        [\n          _vm._v(\"\\n    Properties:\\n    \"),\n          _c(\n            \"v-btn\",\n            { attrs: { text: \"\" }, on: { click: _vm.onOpenPropertiesDialog } },\n            [_vm._v(\"\\n      Edit\\n    \")]\n          ),\n          _vm._v(\" \"),\n          _c(\"v-btn\", { attrs: { text: \"\" }, on: { click: _vm.onClear } }, [\n            _vm._v(\"\\n      Clear\\n    \")\n          ])\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\"div\", [\n        _c(\n          \"ul\",\n          _vm._l(_vm.visual, function(values, name) {\n            return _c(\"li\", { key: name }, [\n              _vm._v(\"\\n        \" + _vm._s(name) + \"\\n        \"),\n              _c(\n                \"ul\",\n                _vm._l(values, function(item, index) {\n                  return _c(\n                    \"li\",\n                    {\n                      directives: [\n                        {\n                          name: \"show\",\n                          rawName: \"v-show\",\n                          value: item !== \"\",\n                          expression: \"item !== ''\"\n                        }\n                      ],\n                      key: index\n                    },\n                    [_vm._v(\"\\n            \" + _vm._s(item) + \"\\n          \")]\n                  )\n                }),\n                0\n              )\n            ])\n          }),\n          0\n        )\n      ]),\n      _vm._v(\" \"),\n      _c(\"app-property-dialog\", {\n        attrs: { visible: _vm.visible, types: _vm.types },\n        on: {\n          save: _vm.onSavePropertiesDialog,\n          close: _vm.onClosePropertiesDialog\n        },\n        model: {\n          value: _vm.properties,\n          callback: function($$v) {\n            _vm.properties = $$v\n          },\n          expression: \"properties\"\n        }\n      })\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./property-filter.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./property-filter.vue?vue&type=script&lang=js&\"","<template>\n  <div>\n    <div>\n      Properties:\n      <v-btn\n        text\n        @click=\"onOpenPropertiesDialog\"\n      >\n        Edit\n      </v-btn>\n      <v-btn\n        text\n        @click=\"onClear\"\n      >\n        Clear\n      </v-btn>\n    </div>\n    <div>\n      <ul>\n        <li\n          v-for=\"(values, name) in visual\"\n          :key=\"name\"\n        >\n          {{ name }}\n          <ul>\n            <li\n              v-for=\"(item, index) in values\"\n              v-show=\"item !== ''\"\n              :key=\"index\"\n            >\n              {{ item }}\n            </li>\n          </ul>\n        </li>\n      </ul>\n    </div>\n    <app-property-dialog\n      v-model=\"properties\"\n      :visible=\"visible\"\n      :types=\"types\"\n      @save=\"onSavePropertiesDialog\"\n      @close=\"onClosePropertiesDialog\"\n    />\n  </div>\n</template>\n\n<script>\nimport PropertyDialog from \"../components/properties-dialog\";\nimport {getDatabase} from \"../database\";\nimport {PredicateEditType} from \"../database\";\n\nexport default {\n  \"name\": \"PropertyFilter\",\n  \"components\": {\n    \"app-property-dialog\": PropertyDialog,\n  },\n  \"props\": {\n    \"value\": {\"type\": Object, \"required\": true},\n  },\n  \"data\": () => ({\n    // Local copy of the data.\n    \"properties\": {},\n    \"visible\": false,\n    \"types\": [],\n    \"visual\": {},\n  }),\n  \"watch\": {\n    \"value.properties\": async function (oldValue, newValue) {\n      if (oldValue === newValue) {\n        return;\n      }\n      await this.computeVisual();\n    },\n  },\n  \"methods\": {\n    \"onOpenPropertiesDialog\": function () {\n      this.properties = copyProperties(this.value.properties);\n      this.visible = true;\n    },\n    \"onClear\": function() {\n      this.$emit(\"input\", {\n        ...this.value,\n        \"properties\": {},\n      });\n      this.$emit(\"change\");\n    },\n    \"onSavePropertiesDialog\": async function () {\n      this.visible = false;\n      this.$emit(\"input\", {\n        ...this.value,\n        \"properties\": this.properties,\n      });\n      this.$emit(\"change\");\n    },\n    \"onClosePropertiesDialog\": function () {\n      this.visible = false;\n    },\n    \"computeVisual\": async function () {\n      const database = getDatabase();\n      const properties = {};\n      (await database.getPredicates()).map(item => properties[item.iri] = item);\n      const result = {};\n      for (const [iri, values] of Object.entries(this.value.properties)) {\n        const property = properties[iri];\n        let valuesToShow = [];\n        switch (property.type) {\n          case PredicateEditType.Codelist:\n            for (const value of values) {\n              valuesToShow.push(await database.getLabel(value));\n            }\n            break;\n          default:\n            valuesToShow = values;\n            break;\n        }\n        result[property.label] = valuesToShow;\n      }\n      this.visual = Object.freeze(result);\n    },\n  },\n};\n\nfunction copyProperties(properties) {\n  const result = {};\n  for (const [key, value] of Object.entries(properties)) {\n    result[key] = [...value];\n  }\n  return result;\n}\n\n</script>","import { render, staticRenderFns } from \"./property-filter.vue?vue&type=template&id=9c29518a&\"\nimport script from \"./property-filter.vue?vue&type=script&lang=js&\"\nexport * from \"./property-filter.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/knoma/knoma/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('9c29518a')) {\n      api.createRecord('9c29518a', component.options)\n    } else {\n      api.reload('9c29518a', component.options)\n    }\n    module.hot.accept(\"./property-filter.vue?vue&type=template&id=9c29518a&\", function () {\n      api.rerender('9c29518a', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"client/document-list/property-filter.vue\"\nexport default component.exports","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./document-filter.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./document-filter.vue?vue&type=script&lang=js&\"","<template>\n  <v-container>\n    <v-text-field\n      label=\"Text search\"\n      :value=\"value.search\"\n      @input=\"onSearchInput\"\n      @change=\"onChange\"\n    />\n    <app-type-filter\n      :value=\"value\"\n      @input=\"onInput\"\n      @change=\"onChange\"\n    />\n    <app-property-filter\n      :value=\"value\"\n      @input=\"onInput\"\n      @change=\"onChange\"\n    />\n  </v-container>\n</template>\n\n<script>\nimport TypeFilter from \"./type-filter\";\nimport PropertyFilter from \"./property-filter\";\n\nexport default {\n  \"name\": \"DocumentFilter\",\n  \"components\": {\n    \"app-type-filter\": TypeFilter,\n    \"app-property-filter\": PropertyFilter,\n  },\n  \"props\": {\n    \"value\": {\"type\": Object, \"required\": true},\n  },\n  \"methods\": {\n    \"onSearchInput\": function (value) {\n      this.$emit(\"input\", {\n        ...this.value,\n        \"search\": value,\n      });\n      this.$emit(\"change\");\n    },\n    \"onChange\": function () {\n      this.$emit(\"change\");\n    },\n    \"onInput\": function(value) {\n      this.$emit(\"input\", value);\n    },\n  },\n};\n</script>","import { render, staticRenderFns } from \"./document-filter.vue?vue&type=template&id=0dac8796&\"\nimport script from \"./document-filter.vue?vue&type=script&lang=js&\"\nexport * from \"./document-filter.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/knoma/knoma/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('0dac8796')) {\n      api.createRecord('0dac8796', component.options)\n    } else {\n      api.reload('0dac8796', component.options)\n    }\n    module.hot.accept(\"./document-filter.vue?vue&type=template&id=0dac8796&\", function () {\n      api.rerender('0dac8796', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"client/document-list/document-filter.vue\"\nexport default component.exports","import {Document, getDatabase} from \"../database\";\n\nexport interface TypeFilter {\n\n  iri: string;\n\n  include: boolean;\n\n}\n\nexport type PropertyFilters = { [iri: string]: string[] };\n\nexport class DocumentFilters {\n\n  search = \"\";\n\n  types: TypeFilter[] = [];\n\n  properties: PropertyFilters = {};\n\n}\n\nexport class FilteredDocumentSource {\n\n  documents: Document[] = [];\n\n  visibleDocuments: Document[] = [];\n\n  filters: DocumentFilters = new DocumentFilters();\n\n  visibleLimit = 12;\n\n  async refresh(): Promise<void> {\n    const database = getDatabase();\n    const documents = await database.getDocuments();\n    this.documents = documents.filter(doc => this.filterDocument(doc));\n    this.visibleDocuments = this.documents.slice(0, this.visibleLimit);\n  }\n\n  private filterDocument(document: Document): boolean {\n    return this.filterBySearch(document)\n      && this.filterByType(document)\n      && this.filterByProperties(document);\n  }\n\n  private filterBySearch(document: Document): boolean {\n    // Check that we have filter value set.\n    const search = this.filters.search;\n    if (search === undefined || search == null || search.length < 2) {\n      return true;\n    }\n    // Use lowercase match as a filter.\n    const title = document.title.toLowerCase();\n    if (!title.includes(search.toLowerCase())) {\n      return false;\n    }\n    return true;\n  }\n\n  private filterByType(document: Document): boolean {\n    const filterTypes = this.filters.types;\n    if (filterTypes.length === 0) {\n      return true;\n    }\n    const documentTypes = document.types;\n    for (const type of filterTypes) {\n      const documentIncludeType = documentTypes.includes(type.iri);\n      if (documentIncludeType === type.include) {\n        continue;\n      }\n      return false;\n    }\n    return true;\n  }\n\n  private filterByProperties(document: Document): boolean {\n    for (const [iri, filterValues] of Object.entries(this.filters.properties)) {\n      const documentValues = document.properties[iri];\n      if (documentValues === undefined) {\n        return false;\n      }\n      // If no values are provided just check that there is a value.\n      for (const filterValue of filterValues) {\n        if (filterValue === \"\") {\n          continue;\n        }\n        if (documentValues.includes(filterValue)) {\n          continue;\n        }\n        return false;\n      }\n    }\n    return true;\n  }\n\n  showMore(): void {\n    this.visibleLimit += 12;\n    this.visibleDocuments = this.documents.slice(0, this.visibleLimit);\n  }\n\n}\n","<template>\n  <v-container>\n    <app-filter\n      v-model=\"source.filters\"\n      @change=\"reload\"\n    />\n    <v-list class=\"item-list\">\n      <app-item\n        v-for=\"item in source.visibleDocuments\"\n        :key=\"item.iri\"\n        :value=\"item\"\n        @open=\"onOpen\"\n        @delete=\"onDelete\"\n      />\n      <v-divider />\n      <v-list-item>\n        <v-list-item-content\n          v-if=\"source.visibleLimit < source.documents.length\"\n        >\n          <div>\n            Showing {{ source.visibleLimit }}\n            out of {{ source.documents.length }}\n            documents.\n          </div>\n          <v-btn\n            class=\"mt-2\"\n            @click=\"onShowMore\"\n          >\n            Show more\n          </v-btn>\n        </v-list-item-content>\n        <v-list-item-content\n          v-else\n        >\n          All of {{ source.documents.length }} documents are visible.\n        </v-list-item-content>\n      </v-list-item>\n    </v-list>\n    <div class=\"floating-menu\">\n      <v-btn\n        class=\"bottom\"\n        color=\"green darken-2\"\n        fab\n        dark\n        @click=\"onCreate\"\n      >\n        <v-icon>mdi-plus</v-icon>\n      </v-btn>\n    </div>\n    <v-overlay :value=\"loading\">\n      <v-progress-circular\n        :size=\"50\"\n        color=\"primary\"\n        indeterminate\n      />\n    </v-overlay>\n  </v-container>\n</template>\n\n<script>\nimport {getDatabase} from \"../database\";\nimport Item from \"./document-list-item\";\nimport Filter from \"./document-filter\";\nimport {FilteredDocumentSource} from \"./filtered-document-source\";\n\nexport default {\n  \"name\": \"DocumentList\",\n  \"components\": {\n    \"app-item\": Item,\n    \"app-filter\": Filter,\n  },\n  \"data\": () => ({\n    \"source\": new FilteredDocumentSource(),\n    \"loading\": false,\n  }),\n  \"mounted\": async function mounted() {\n    await this.reload();\n  },\n  \"methods\": {\n    \"onOpen\": function (event) {\n      const location = {\n        \"name\": \"document-edit\",\n        \"query\": {\n          \"document\": event.iri,\n        },\n      };\n      if (event.ctrlKey) {\n        const url = this.$router.resolve(location).href;\n        window.open(url, \"_blank\");\n      } else {\n        this.$router.push(location);\n      }\n    },\n    \"onDelete\": async function (iri) {\n      this.loading = true;\n      const database = getDatabase();\n      await database.deleteDocument(iri);\n      this.loading = false;\n      //\n      await this.reload();\n    },\n    \"onCreate\": function () {\n      this.$router.push({\n        \"name\": \"document-edit\",\n      });\n    },\n    \"reload\": async function() {\n      this.loading = true;\n      await this.source.refresh();\n      this.loading = false;\n    },\n    \"onShowMore\": function() {\n      this.source.showMore();\n    },\n  },\n};\n</script>\n\n<style scoped>\n.bottom {\n  bottom: 2rem;\n}\n\n.floating-menu {\n  position: fixed;\n  right: 1rem;\n  bottom: -0.9rem;\n}\n\n.item-list {\n  margin-bottom: 5rem;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./document-list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./document-list.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./document-list.vue?vue&type=template&id=649a38ca&scoped=true&\"\nimport script from \"./document-list.vue?vue&type=script&lang=js&\"\nexport * from \"./document-list.vue?vue&type=script&lang=js&\"\nimport style0 from \"./document-list.vue?vue&type=style&index=0&id=649a38ca&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"649a38ca\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/knoma/knoma/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('649a38ca')) {\n      api.createRecord('649a38ca', component.options)\n    } else {\n      api.reload('649a38ca', component.options)\n    }\n    module.hot.accept(\"./document-list.vue?vue&type=template&id=649a38ca&scoped=true&\", function () {\n      api.rerender('649a38ca', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"client/document-list/document-list.vue\"\nexport default component.exports","import VueRouter from \"vue-router\";\nimport About from \"../about/about\";\nimport DocumentDetail from \"../document-detail/document-detail\";\nimport DocumentList from \"../document-list/document-list\";\n\nconst router = new VueRouter({\n  \"routes\": [\n    {\n      \"path\": \"/\",\n      \"name\": \"home\",\n      \"component\": DocumentDetail,\n    }, {\n      \"path\": \"/document-edit\",\n      \"name\": \"document-edit\",\n      \"component\": DocumentDetail,\n    }, {\n      \"path\": \"/documents\",\n      \"name\": \"documents\",\n      \"component\": DocumentList,\n    }, {\n      \"path\": \"/about\",\n      \"name\": \"about\",\n      \"component\": About,\n    },\n  ],\n});\n\nexport default router;\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"v-app\",\n    [\n      _c(\n        \"v-app-bar\",\n        { attrs: { color: \"#0000ff\", dark: \"\", app: \"\" } },\n        [\n          _c(\"v-toolbar-title\", [_vm._v(\"\\n      Knowledge Manager\\n    \")]),\n          _vm._v(\" \"),\n          _c(\"v-spacer\"),\n          _vm._v(\" \"),\n          _c(\n            \"v-btn\",\n            {\n              staticClass: \"mr-6\",\n              attrs: { to: { name: \"documents\" }, text: \"\" }\n            },\n            [_vm._v(\"\\n      Documents\\n    \")]\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"v-btn\",\n            { staticClass: \"mr-6\", attrs: { to: { name: \"about\" }, text: \"\" } },\n            [_vm._v(\"\\n      About\\n    \")]\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"v-btn\",\n            {\n              attrs: {\n                href: \"https://github.com/skodapetr/knoma/issues\",\n                rel: \"noopener noreferrer\",\n                target: \"_blank\",\n                text: \"\"\n              }\n            },\n            [_vm._v(\"\\n      GitHub\\n    \")]\n          )\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\"v-main\", [_c(\"router-view\")], 1),\n      _vm._v(\" \"),\n      _c(\"notifications\")\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./layout.vue?vue&type=template&id=c0868522&\"\nimport script from \"./layout.vue?vue&type=script&lang=js&\"\nexport * from \"./layout.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/knoma/knoma/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('c0868522')) {\n      api.createRecord('c0868522', component.options)\n    } else {\n      api.reload('c0868522', component.options)\n    }\n    module.hot.accept(\"./layout.vue?vue&type=template&id=c0868522&\", function () {\n      api.rerender('c0868522', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"client/application/layout.vue\"\nexport default component.exports","<template>\n  <v-app>\n    <v-app-bar\n      color=\"#0000ff\"\n      dark\n      app\n    >\n      <v-toolbar-title>\n        Knowledge Manager\n      </v-toolbar-title>\n      <v-spacer />\n      <v-btn\n        :to=\"{'name':'documents'}\"\n        class=\"mr-6\"\n        text\n      >\n        Documents\n      </v-btn>\n      <v-btn\n        :to=\"{'name':'about'}\"\n        class=\"mr-6\"\n        text\n      >\n        About\n      </v-btn>\n      <v-btn\n        href=\"https://github.com/skodapetr/knoma/issues\"\n        rel=\"noopener noreferrer\"\n        target=\"_blank\"\n        text\n      >\n        GitHub\n      </v-btn>\n    </v-app-bar>\n    <v-main>\n      <router-view />\n    </v-main>\n    <notifications />\n  </v-app>\n</template>\n\n<script>\nexport default {\n  \"name\": \"Application\",\n};\n</script>\n","import Vue from \"vue\";\nimport Vuetify from \"vuetify\";\nimport VueRouter from \"vue-router\";\nimport VueNotifications from \"vue-notification\";\n\nimport \"vuetify/dist/vuetify.min.css\";\n\nimport router from \"./application/router\";\nimport Layout from \"./application/layout.vue\";\n\nVue.use(Vuetify);\nVue.use(VueRouter);\nVue.use(VueNotifications);\n\n/* eslint-disable no-new */\nnew Vue({\n  \"el\": \"#application\",\n  \"router\": router,\n  \"vuetify\": new Vuetify({\n    \"theme\": {\n      \"dark\": true,\n    },\n  }),\n  \"render\": (createElement) => createElement(Layout),\n});\n"],"sourceRoot":""}